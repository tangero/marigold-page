<h2>ğŸ“° ÄŒlÃ¡nky a novinky</h2>

{% capture tool_path %}/{{ include.tool_folder }}/{% endcapture %}
{% assign folder_posts = site.vibecoding | where_exp: "post", "post.path contains tool_path" %}
{% assign main_posts = site.posts | where: "sw", include.tool_sw %}

{% comment %} Filtrujeme pouze ÄlÃ¡nky bez hide: true {% endcomment %}
{% assign folder_posts_visible = folder_posts | where_exp: "post", "post.hide != true" %}

{% comment %} SpojÃ­me vÅ¡echny pÅ™Ã­spÄ›vky do jednoho pole {% endcomment %}
{% assign all_posts = main_posts | concat: folder_posts_visible | sort: "date" | reverse %}

{% for post in all_posts %}
  {% comment %} ZjistÃ­me dÃ©lku obsahu pro rozhodnutÃ­ o zobrazenÃ­ {% endcomment %}
  {% assign content_length = post.content | strip_html | size %}
  {% assign is_short = false %}
  {% if content_length < 1000 %}
    {% assign is_short = true %}
  {% endif %}

  {% comment %} Rozhodujeme o typu URL - zda jde o ÄlÃ¡nek z vibecoding sekce nebo z _posts {% endcomment %}
  {% assign is_vibecoding_article = false %}
  {% if post.path contains '_vibecoding/' %}
    {% assign is_vibecoding_article = true %}
  {% endif %}

  <article class="vibecoding-article {% if is_short %}full-article{% else %}excerpt-article{% endif %}">
    {% comment %} Thumbnail pro hlavnÃ­ posty {% endcomment %}
    {% if post.thumbnail and site.posts contains post %}
      <div class="article-thumbnail">
        <img src="{{ post.thumbnail }}" alt="{{ post.title }}">
      </div>
    {% endif %}

    {% comment %} Nadpis vÅ¾dy jako odkaz - pouÅ¾Ã­vÃ¡me absolutnÃ­ URL {% endcomment %}
    <h3 class="article-title">
      <a href="{{ post.url | relative_url }}">
        <span class="article-date">{{ post.date | date: "%d. %m. %Y" }}</span> - {{ post.title }}
      </a>
    </h3>

    {% comment %} Obsah - buÄ celÃ½ nebo jen excerpt {% endcomment %}
    <div class="article-content">
      {% if is_short %}
        {% comment %} KrÃ¡tkÃ½ ÄlÃ¡nek - zobrazÃ­me celÃ½ {% endcomment %}
        {{ post.content }}
      {% else %}
        {% comment %} DlouhÃ½ ÄlÃ¡nek - zobrazÃ­me jen excerpt {% endcomment %}
        <div class="article-excerpt">
          {% if post.excerpt and post.excerpt != "" %}
            {{ post.excerpt | strip_html | truncatewords: 50 }}
          {% else %}
            {% comment %} Pokud nenÃ­ excerpt, vezmeme prvnÃ­ odstavec {% endcomment %}
            {% assign first_paragraph = post.content | split: "</p>" | first | append: "</p>" %}
            {{ first_paragraph | strip_html | truncatewords: 50 }}
          {% endif %}
        </div>
        
        {% comment %} Link na pokraÄovÃ¡nÃ­ pro vÅ¡echny dlouhÃ© ÄlÃ¡nky {% endcomment %}
        <div class="article-read-more-wrapper">
          <a href="{{ post.url | relative_url }}" class="article-read-more">
            ğŸ“– PokraÄovÃ¡nÃ­... â†’
          </a>
        </div>
      {% endif %}
    </div>

    {% comment %} Meta informace {% endcomment %}
    {% if post.tags and post.tags.size > 0 %}
      <div class="article-meta">
        <span class="article-tags">
          ğŸ·ï¸ 
          {% for tag in post.tags limit: 3 %}
            <span class="tag">{{ tag }}</span>{% unless forloop.last %}, {% endunless %}
          {% endfor %}
        </span>
      </div>
    {% endif %}

    <div class="article-separator"></div>
  </article>
{% endfor %}

{% if all_posts.size == 0 %}
  <div class="no-articles">
    <p>ğŸ“ <em>ZatÃ­m zde nejsou Å¾Ã¡dnÃ© ÄlÃ¡nky. Sledujte novinky!</em></p>
  </div>
{% endif %} 