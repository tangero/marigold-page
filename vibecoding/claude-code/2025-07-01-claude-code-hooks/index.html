<hr />
<p>author: Patrick Zandl
categories:</p>

<ul>
  <li>AI</li>
  <li>Claude Code</li>
  <li>Anthropic</li>
  <li>automatizace</li>
  <li>vývojářské nástroje
layout: post
post_excerpt: Claude Code získal funkci Hooks, která umožňuje automatické spouštění skriptů při různých událostech během práce s nástrojem. Systém podporuje validaci příkazů, formátování kódu a vlastní rozšíření.
summary_points:</li>
  <li>Claude Code představil funkci Hooks pro automatizaci a rozšíření možností nástroje</li>
  <li>Hooks umožňují spouštět skripty před a po použití nástrojů jako jsou Bash, Write nebo Edit</li>
  <li>Systém podporuje validaci příkazů, automatické formátování kódu a vlastní notifikace</li>
  <li>Konfigurace probíhá pomocí JSON souborů s možností nastavení na úrovni uživatele nebo projektu</li>
  <li>Funkce zahrnuje bezpečnostní opatření včetně kontroly vstupu a omezení přístupu k citlivým souborům</li>
  <li>Podporuje také práci s MCP (Model Context Protocol) nástroji
title: Claude Code Hooks
—–</li>
</ul>

<p>Anthropic rozšířil svůj nástroj Claude Code o novou funkci nazvanou Hooks, která umožňuje vývojářům automatizovat různé úkoly a rozšířit možnosti tohoto nástroje pro práci s umělou inteligencí v příkazové řádce. Systém umožňuje spouštět vlastní skripty při specifických událostech během používání Claude Code.</p>

<h2 id="princip-fungování-hooks">Princip fungování Hooks</h2>

<p>Hooks fungují jako automatické spouštěče, které reagují na čtyři základní typy událostí v Claude Code. Systém <strong>PreToolUse</strong> se aktivuje před použitím nástroje a umožňuje například validaci příkazů nebo kontrolu bezpečnosti. <strong>PostToolUse</strong> se spouští po dokončení operace a hodí se pro úkoly jako je formátování kódu nebo zápis do logů. <strong>Notification</strong> slouží pro zasílání upozornění, zatímco <strong>Stop</strong> umožňuje reakci na ukončení procesů.</p>

<p>Každý hook obsahuje matcher (vzor pro rozpoznání nástroje) a samotný příkaz, který se má spustit. Například při použití nástroje Bash může hook automaticky validovat příkaz před jeho spuštěním a zabránit potenciálně nebezpečným operacím.</p>

<h2 id="konfigurace-a-nastavení">Konfigurace a nastavení</h2>

<p>Konfigurace Hooks probíhá prostřednictvím JSON souborů, které se ukládají do adresáře <code class="language-plaintext highlighter-rouge">.claude</code>. Systém podporuje tři úrovně konfigurace: globální nastavení v <code class="language-plaintext highlighter-rouge">~/.claude/settings.json</code>, projektové nastavení v <code class="language-plaintext highlighter-rouge">.claude/settings.json</code> a lokální nastavení v <code class="language-plaintext highlighter-rouge">.claude/settings.local.json</code>.</p>

<p>Základní struktura konfigurace vypadá následovně:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"hooks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"PreToolUse"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"matcher"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bash"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"hooks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"command"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jq -r '</span><span class="se">\"\\</span><span class="s2">(.tool_input.command) - </span><span class="se">\\</span><span class="s2">(.tool_input.description // </span><span class="se">\"</span><span class="s2">No description</span><span class="se">\"</span><span class="s2">)</span><span class="se">\"</span><span class="s2">"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Systém podporuje regulární výrazy pro matchování nástrojů, což umožňuje vytvářet hooks pro skupiny podobných nástrojů. Například <code class="language-plaintext highlighter-rouge">Write|Edit|MultiEdit</code> zachytí všechny nástroje pro editaci souborů.</p>

<h2 id="praktické-využití">Praktické využití</h2>

<p>Hooks nachází uplatnění v několika oblastech. Pro <strong>automatické formátování kódu</strong> můžete nastavit hook, který po každé editaci souboru spustí příslušný formátovač kódu podle typu souboru. <strong>Validace příkazů</strong> umožňuje kontrolovat bash příkazy před jejich spuštěním a například doporučit použití modernějších alternativ.</p>

<p>Další možností je <strong>logování aktivit</strong>, kdy hooks zapisují informace o všech provedených operacích do souboru pro pozdější analýzu. Systém také podporuje <strong>vlastní notifikace</strong>, které mohou informovat o dokončení dlouhotrvajících úloh.</p>

<p>Praktickým příkladem je <strong>kontrola pojmenování souborů</strong>. Hook může zajistit konzistentní pojmenování souborů podle snake_case konvence. Konfigurace vypadá následovně:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"hooks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"PreToolUse"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"matcher"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Write"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"hooks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"command"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/path/to/file-naming-validator.py"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Validační skript kontroluje název souboru a pokud neodpovídá snake_case konvenci, vrátí exit kód 2 s návrhem správného názvu. Když Claude Code navrhne vytvoření souboru “gemini-service.py”, hook operaci zablokuje a zobrazí chybu: “Inconsistent file naming detected! Directory convention is snake_case. Suggested filename: gemini_service.py”. Tento přístup pomáhá udržet pořádek v projektech, kde AI často vytváří soubory s různými konvencemi pojmenování.</p>

<h2 id="výstup-a-kontrola-chování">Výstup a kontrola chování</h2>

<p>Hooks mohou ovlivnit chování Claude Code prostřednictvím návratových kódů. <strong>Exit kód 0</strong> označuje úspěšné provedení, <strong>exit kód 2</strong> blokuje provedení nástroje a zobrazí chybovou zprávu uživateli, zatímco ostatní kódy způsobí zobrazení chyby bez blokování.</p>

<p>Pro pokročilejší kontrolu podporuje systém JSON výstup, který umožňuje detailnější řízení chování. Můžete například nastavit <code class="language-plaintext highlighter-rouge">"decision": "block"</code> pro zablokování operace nebo <code class="language-plaintext highlighter-rouge">"suppressOutput": true</code> pro skrytí výstupu z transkriptu.</p>

<h2 id="bezpečnostní-aspekty">Bezpečnostní aspekty</h2>

<p>Systém obsahuje několik bezpečnostních opatření. Hooks by měly vždy validovat a sanitizovat vstupní data, používat absolutní cesty k souborům a vyhýbat se přístupu k citlivým souborům jako <code class="language-plaintext highlighter-rouge">.env</code> nebo <code class="language-plaintext highlighter-rouge">.git</code>. Dokumentace zdůrazňuje, že hooks spouští libovolné příkazy na systému, proto je nutná opatrnost při jejich konfiguraci.</p>

<p>Mezi doporučené postupy patří použití uvozovek u shell proměnných, blokování path traversal útoků pomocí <code class="language-plaintext highlighter-rouge">..</code> a omezení přístupu k citlivým adresářům. Systém také podporuje debug režim spouštěný pomocí parametru <code class="language-plaintext highlighter-rouge">--debug</code>.</p>

<h2 id="podpora-mcp-nástrojů">Podpora MCP nástrojů</h2>

<p>Hooks pracují i s nástroji Model Context Protocol (MCP), které používají specifické pojmenování ve formátu <code class="language-plaintext highlighter-rouge">mcp__&lt;server&gt;__&lt;tool&gt;</code>. Například <code class="language-plaintext highlighter-rouge">mcp__memory__create_entities</code> pro nástroje práce s pamětí nebo <code class="language-plaintext highlighter-rouge">mcp__filesystem__read_file</code> pro práci se soubory.</p>

<p>Tato integrace umožňuje vytvářet hooks pro pokročilé operace s různými službami a rozšířeními Claude Code, což výrazně zvyšuje možnosti automatizace.</p>

<h2 id="výhody-a-omezení">Výhody a omezení</h2>

<p>Hooks představují významné rozšíření možností Claude Code, které umožňuje přizpůsobit nástroj specifickým potřebám vývojářů. Systém je flexibilní a podporuje širokou škálu použití od jednoduchého logování po komplexní validaci a formátování.</p>

<p>Omezením je však nutnost ruční konfigurace a potřeba znalosti shell skriptování pro pokročilé využití. Dokumentace také upozorňuje na bezpečnostní rizika spojená se spouštěním vlastních skriptů.</p>

<p>Funkce Hooks je k dispozici v <a href="https://docs.anthropic.com/en/docs/build-with-claude/claude-code/hooks">oficiální dokumentaci Anthropic</a> spolu s dalšími informacemi o konfiguraci a příklady použití.</p>
