<!DOCTYPE html>
<html>
  <head>
    <title>Tech News Health Check System - KompletnÃ­ Dokumentace | Marigold.cz - SÃ­tÄ› a Technologie</title>
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Tech News Health Check System - KompletnÃ­ Dokumentace" />
<meta name="author" content="Patrick Zandl" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Technologie a SvÄ›t" />
<meta property="og:description" content="Technologie a SvÄ›t" />
<link rel="canonical" href="https://www.marigold.cz/docs/HEALTH_CHECK_SYSTEM/" />
<meta property="og:url" content="https://www.marigold.cz/docs/HEALTH_CHECK_SYSTEM/" />
<meta property="og:site_name" content="Marigold.cz" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Tech News Health Check System - KompletnÃ­ Dokumentace" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Patrick Zandl"},"description":"Technologie a SvÄ›t","headline":"Tech News Health Check System - KompletnÃ­ Dokumentace","url":"https://www.marigold.cz/docs/HEALTH_CHECK_SYSTEM/"}</script>
<!-- End Jekyll SEO tag -->

        <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>
    <link href="https://fed.brid.gy/" rel="alternate" type="application/activity+json">

    
    <meta property="og:description" content="Technologie a SvÄ›t" />
    
    <meta name="author" content="Marigold.cz" />

    
    <meta property="og:title" content="Tech News Health Check System - KompletnÃ­ Dokumentace" />
    <meta property="twitter:title" content="Tech News Health Check System - KompletnÃ­ Dokumentace" />
    

    
    
























<!-- og-image source: extracted from content -->
<meta property="og:image" content="https://www.marigold.cz<article class="/>
<meta property="twitter:image" content="https://www.marigold.cz<article class="/>
<meta property="og:image:width" content="1200"/>
<meta property="og:image:height" content="630"/>
<meta name="twitter:card" content="summary_large_image"/>


    <meta property="og:site_name" content="Marigold.cz | Technologie a SpoleÄnost"/>

    


    

    <link rel="stylesheet" type="text/css" href="/assets/style.css" />
    <link rel="alternate" type="application/rss+xml" title="Marigold.cz - Technologie a SvÄ›t" href="/feed.xml" />
    <link rel="canonical" href="https://www.marigold.cz/docs/HEALTH_CHECK_SYSTEM/" />

    <meta name="theme-color" content="#000000">

    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
    <link rel="manifest" href="/manifest-marigold.json">
    <link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/images/favicon.ico">
    <meta name="msapplication-TileColor" content="#2d89ef">
    <meta name="msapplication-config" content="/images/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <!-- iOS Web App Configuration -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Marigold">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <!-- OneSignal Web Push Notifications -->
<script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
<script>
  console.log('[OneSignal] Script starting...');

  window.OneSignalDeferred = window.OneSignalDeferred || [];

  OneSignalDeferred.push(async function(OneSignal) {
    try {
      console.log('[OneSignal] Initializing OneSignal SDK');

      // Initialize OneSignal with minimal config
      const config = {
        appId: "00fc3def-70d1-4e7d-a081-984d5e738a75",
        notifyButton: {
          enable: true,
          position: "bottom-right",
          size: "medium",
          text: {
            "button.subscribe": "PÅ™ihlÃ¡sit se k oznÃ¡menÃ­m",
            "button.unsubscribe": "OdhlÃ¡sit se od oznÃ¡menÃ­",
          },
        },
        // iOS Web Push support - requires manifest.json and home screen installation
        allowLocalhostAsSecureOrigin: true,
        // Safari Web Push configuration
        safari: {
          enable: true
        }
      };

      await OneSignal.init(config);
      console.log('[OneSignal] Initialization complete');

      // Show slidedown on 3rd page visit
      // This uses localStorage to track page visits
      try {
        const visitKey = 'onesignal_visit_count';
        let visitCount = parseInt(localStorage.getItem(visitKey) || '0', 10);
        visitCount++;
        localStorage.setItem(visitKey, visitCount.toString());

        console.log('[OneSignal] Page visit count:', visitCount);

        if (visitCount === 3) {
          console.log('[OneSignal] 3rd visit detected - showing slidedown');

          // Show slidedown prompt
          await OneSignal.Slidedown.promptPushCategories({
            slidedownPromptOptions: {
              actionMessage: "Chcete dostÃ¡vat oznÃ¡menÃ­ o novÃ½ch ÄlÃ¡ncÃ­ch?",
              acceptButtonText: "Ano, pÅ™ihlaste mÄ›",
              cancelButtonText: "Ne, dÄ›kuji",
            }
          });

          console.log('[OneSignal] Slidedown shown successfully');

          // Reset counter after showing
          localStorage.setItem(visitKey, '0');
        } else {
          console.log('[OneSignal] Will show slidedown on visit #3 (current: #' + visitCount + ')');
        }
      } catch (e) {
        console.log('[OneSignal] Slidedown error:', e.message);
      }

      // Check permission status
      const permission = await OneSignal.Notifications.permission;
      console.log('[OneSignal] Permission status:', permission);

    } catch (error) {
      console.error('[OneSignal] Error:', error.message);
    }
  });
</script>


    <!-- Seznam.cz Discussion System -->
    <script type="text/javascript" src="https://d21-a.sdn.cz/d_21/sl/3/loader.js"></script>

    <script type="text/javascript">
      window.heapReadyCb=window.heapReadyCb||[],window.heap=window.heap||[],heap.load=function(e,t){window.heap.envId=e,window.heap.clientConfig=t=t||{},window.heap.clientConfig.shouldFetchServerConfig=!1;var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://cdn.us.heap-api.com/config/"+e+"/heap_config.js";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(a,r);var n=["init","startTracking","stopTracking","track","resetIdentity","identify","getSessionId","getUserId","getIdentity","addUserProperties","addEventProperties","removeEventProperty","clearEventProperties","addAccountProperties","addAdapter","addTransformer","addTransformerFn","onReady","addPageviewProperties","removePageviewProperty","clearPageviewProperties","trackPageview"],i=function(e){return function(){var t=Array.prototype.slice.call(arguments,0);window.heapReadyCb.push({name:e,fn:function(){heap[e]&&heap[e].apply(heap,t)}})}};for(var p=0;p<n.length;p++)heap[n[p]]=i(n[p])};
      heap.load("2219710997");
  </script>
  </head>

  <body>
    <div id="bar"></div>
    <div class="wrapper-container">
      <div class="wrapper-masthead">
        <div class="container">
          <header class="masthead clearfix">
            <a href="/" class="site-avatar"><img src="/images/patrick-avatar.jpg" alt="Marigold.cz" /></a>

            <div class="site-info">
              <h1 class="site-name"><a href="/">Marigold.cz</a></h1>
              <p class="site-description">Technologie a SvÄ›t</p>

            </div>

            <nav>
              <a href="/search">ğŸ”</a> |
              <a href="https://www.prolnuto.cz/">ğŸ§‘â€ğŸ’» Kurzy AI</a> |
              <a href="https://www.vibecoding.cz/">ğŸ–¥ï¸ Vibecoding</a> |
              <a href="/mobilnisite">ğŸ—¼ 4G/5G</a> |
              <a href="/ai">ğŸ¤– AI</a> |
              <span class="nav-dropdown">
                <button class="nav-dropdown-toggle" aria-expanded="false" aria-label="DalÅ¡Ã­ menu">
                  DalÅ¡Ã­ â˜°
                </button>
                <div class="nav-dropdown-menu" role="menu">
                  <a href="/tech-news/" role="menuitem">ğŸ’» ZprÃ¡vy</a>
                  <a href="/obrazy" role="menuitem">ğŸ–¼ï¸ Obrazy</a>
                </div>
              </span>
            </nav>
          </header>
        </div>
      </div>

      <div class="wrapper-main">
        <div id="main" role="main" class="container">
          <article class="page">

  <h1>Tech News Health Check System - KompletnÃ­ Dokumentace</h1>

  <div class="entry">
    <h1 id="tech-news-health-check-system---kompletnÃ­-dokumentace">Tech News Health Check System - KompletnÃ­ Dokumentace</h1>

<h2 id="pÅ™ehled">PÅ™ehled</h2>

<p>RobustnÃ­ health monitoring systÃ©m pro automatickÃ© generovÃ¡nÃ­ tech-news ÄlÃ¡nkÅ¯ na Marigold.cz. SystÃ©m detekuje problÃ©my s generovÃ¡nÃ­m, pÅ™ekladem a kvalitou obsahu a poskytuje real-time monitoring pÅ™es Uptimerobot.</p>

<h2 id="architektura">Architektura</h2>

<h3 id="high-level-overview">High-Level Overview</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub Actions (kaÅ¾dÃ© 4h)                                  â”‚
â”‚  â”œâ”€ Fetch tech news (NewsAPI)                               â”‚
â”‚  â”œâ”€ Translate to Czech (LLM)                                â”‚
â”‚  â”œâ”€ Generate articles â†’ _tech_news/*.md                     â”‚
â”‚  â”œâ”€ Run health check â†’ _data/tech_news_health.json          â”‚
â”‚  â””â”€ Jekyll build + deploy                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Live Website (GitHub Pages)                                â”‚
â”‚  â”œâ”€ /health-check/        (JSON endpoint)                   â”‚
â”‚  â””â”€ /health-status/       (HTML dashboard)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Uptimerobot (External Monitor)                             â”‚
â”‚  â”œâ”€ Primary Health Check (keyword: "status": "OK")          â”‚
â”‚  â”œâ”€ Language Check (czech_ratio monitoring)                 â”‚
â”‚  â”œâ”€ Freshness Check (article age monitoring)                â”‚
â”‚  â””â”€ Alerts â†’ Email / Slack / Webhook                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div></div>

<h3 id="datovÃ½-tok">DatovÃ½ tok</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>_tech_news/*.md
    â†“
[Health Check Script]
    â†“
_data/tech_news_health.json
    â†“
[Jekyll Build]
    â†“
/health-check/ (JSON)
/health-status/ (HTML)
    â†“
[Uptimerobot Polling]
    â†“
[Alerts pÅ™i problÃ©mu]
</code></pre></div></div>

<h2 id="komponenty-systÃ©mu">Komponenty SystÃ©mu</h2>

<h3 id="1-health-check-script-scriptstech_news_health_checkpy">1. Health Check Script (<code class="language-plaintext highlighter-rouge">scripts/tech_news_health_check.py</code>)</h3>

<p><strong>Funkce:</strong></p>
<ul>
  <li>Analyzuje vÅ¡echny ÄlÃ¡nky v <code class="language-plaintext highlighter-rouge">_tech_news/</code></li>
  <li>Detekuje jazyk (ÄeÅ¡tina vs angliÄtina)</li>
  <li>Kontroluje Äerstvost obsahu</li>
  <li>Validuje front matter</li>
  <li>VypoÄÃ­tÃ¡vÃ¡ kvalitativnÃ­ metriky</li>
  <li>Generuje JSON report s vÃ½sledky</li>
</ul>

<p><strong>KlÃ­ÄovÃ© kontroly:</strong></p>

<table>
  <thead>
    <tr>
      <th>Check</th>
      <th>Co kontroluje</th>
      <th>Threshold</th>
      <th>Alert Level</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Freshness</strong></td>
      <td>StÃ¡Å™Ã­ nejnovÄ›jÅ¡Ã­ho ÄlÃ¡nku</td>
      <td>Max 6h</td>
      <td>WARNING</td>
    </tr>
    <tr>
      <td><strong>Article Count</strong></td>
      <td>PoÄet ÄlÃ¡nkÅ¯ za 24h</td>
      <td>Min 10</td>
      <td>WARNING</td>
    </tr>
    <tr>
      <td><strong>Language Ratio</strong></td>
      <td>PomÄ›r ÄeskÃ½ch ÄlÃ¡nkÅ¯</td>
      <td>Min 85%</td>
      <td>CRITICAL</td>
    </tr>
    <tr>
      <td><strong>Content Length</strong></td>
      <td>PrÅ¯mÄ›rnÃ¡ dÃ©lka obsahu</td>
      <td>Min 300 znakÅ¯</td>
      <td>WARNING</td>
    </tr>
    <tr>
      <td><strong>Front Matter</strong></td>
      <td>Validita YAML metadat</td>
      <td>Max 10% error rate</td>
      <td>WARNING</td>
    </tr>
  </tbody>
</table>

<p><strong>PouÅ¾itÃ­:</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ZÃ¡kladnÃ­ spuÅ¡tÄ›nÃ­</span>
python scripts/tech_news_health_check.py

<span class="c"># S vlastnÃ­m vÃ½stupnÃ­m souborem</span>
python scripts/tech_news_health_check.py <span class="nt">--output</span> _data/health.json

<span class="c"># S vlastnÃ­m adresÃ¡Å™em tech-news</span>
python scripts/tech_news_health_check.py <span class="nt">--tech-news-dir</span> /path/to/articles

<span class="c"># Exit codes:</span>
<span class="c">#   0 = OK (vÅ¡echny checks proÅ¡ly)</span>
<span class="c">#   1 = WARNING (nÄ›kterÃ© checks majÃ­ varovÃ¡nÃ­)</span>
<span class="c">#   2 = CRITICAL (kritickÃ½ problÃ©m detekovÃ¡n)</span>
</code></pre></div></div>

<h3 id="2-json-health-endpoint-health-check">2. JSON Health Endpoint (<code class="language-plaintext highlighter-rouge">/health-check/</code>)</h3>

<p><strong>ÃšÄel:</strong> Machine-readable endpoint pro Uptimerobot a API monitoring</p>

<p><strong>FormÃ¡t vÃ½stupu:</strong></p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-11-14T13:30:00+00:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"summary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Status: OK | ÄŒlÃ¡nky 24h: 15 | ÄŒeÅ¡tina: 92.3%"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metrics"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"total_articles"</span><span class="p">:</span><span class="w"> </span><span class="mi">3041</span><span class="p">,</span><span class="w">
    </span><span class="nl">"articles_24h"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
    </span><span class="nl">"articles_1h"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"newest_article_age_hours"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.5</span><span class="p">,</span><span class="w">
    </span><span class="nl">"czech_ratio"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.923</span><span class="p">,</span><span class="w">
    </span><span class="nl">"avg_content_length"</span><span class="p">:</span><span class="w"> </span><span class="mi">856</span><span class="p">,</span><span class="w">
    </span><span class="nl">"median_content_length"</span><span class="p">:</span><span class="w"> </span><span class="mi">742</span><span class="p">,</span><span class="w">
    </span><span class="nl">"articles_with_images_pct"</span><span class="p">:</span><span class="w"> </span><span class="mf">95.2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"articles_with_category_pct"</span><span class="p">:</span><span class="w"> </span><span class="mf">98.7</span><span class="p">,</span><span class="w">
    </span><span class="nl">"front_matter_error_rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.03</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"checks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"freshness"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"newest_age_hours"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.5</span><span class="p">,</span><span class="w">
      </span><span class="nl">"articles_24h"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
      </span><span class="nl">"articles_1h"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"czech_ratio"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.923</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sample_size"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
      </span><span class="nl">"english_articles_sample"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"content_quality"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"avg_length"</span><span class="p">:</span><span class="w"> </span><span class="mi">856</span><span class="p">,</span><span class="w">
      </span><span class="nl">"median_length"</span><span class="p">:</span><span class="w"> </span><span class="mi">742</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"front_matter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"error_rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.03</span><span class="p">,</span><span class="w">
      </span><span class="nl">"invalid_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"level"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INFO"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pouze 2 ÄlÃ¡nkÅ¯ za poslednÃ­ hodinu"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><strong>Status hodnoty:</strong></p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">OK</code> - VÅ¡e funguje sprÃ¡vnÄ›</li>
  <li><code class="language-plaintext highlighter-rouge">WARNING</code> - DrobnÃ© problÃ©my, nenÃ­ nutnÃ¡ okamÅ¾itÃ¡ akce</li>
  <li><code class="language-plaintext highlighter-rouge">CRITICAL</code> - VÃ¡Å¾nÃ½ problÃ©m vyÅ¾adujÃ­cÃ­ pozornost</li>
</ul>

<h3 id="3-html-status-dashboard-health-status">3. HTML Status Dashboard (<code class="language-plaintext highlighter-rouge">/health-status/</code>)</h3>

<p><strong>ÃšÄel:</strong> Human-readable dashboard pro debugging a monitoring</p>

<p><strong>Funkce:</strong></p>
<ul>
  <li>Vizualizace vÅ¡ech metrik s barevnÃ½m kÃ³dovÃ¡nÃ­m</li>
  <li>Detail jednotlivÃ½ch checks</li>
  <li>Seznam aktivnÃ­ch alertÅ¯</li>
  <li>UkÃ¡zka problÃ©movÃ½ch ÄlÃ¡nkÅ¯</li>
  <li>Raw JSON data pro debugging</li>
</ul>

<p><strong>PÅ™Ã­stup:</strong> https://marigold.cz/health-status/</p>

<h3 id="4-uptimerobot-monitoring">4. Uptimerobot Monitoring</h3>

<p>KompletnÃ­ setup instrukce: viz <code class="language-plaintext highlighter-rouge">docs/UPTIMEROBOT_SETUP.md</code></p>

<p><strong>ZÃ¡kladnÃ­ konfigurace:</strong></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">Primary Monitor</span><span class="pi">:</span>
  <span class="na">Name</span><span class="pi">:</span> <span class="s">Marigold Tech News - Health Check</span>
  <span class="na">Type</span><span class="pi">:</span> <span class="s">HTTP(s) - Keyword</span>
  <span class="na">URL</span><span class="pi">:</span> <span class="s">https://marigold.cz/health-check/</span>
  <span class="na">Interval</span><span class="pi">:</span> <span class="s">5 minutes</span>
  <span class="na">Keyword</span><span class="pi">:</span> <span class="s1">'</span><span class="s">"status":</span><span class="nv"> </span><span class="s">"OK"'</span>
  <span class="na">Alert</span><span class="pi">:</span> <span class="s">2 consecutive failures (10 min)</span>

<span class="na">Language Monitor</span><span class="pi">:</span>
  <span class="na">Name</span><span class="pi">:</span> <span class="s">Marigold Tech News - Czech Language</span>
  <span class="na">Type</span><span class="pi">:</span> <span class="s">HTTP(s) - Keyword</span>
  <span class="na">URL</span><span class="pi">:</span> <span class="s">https://marigold.cz/health-check/</span>
  <span class="na">Interval</span><span class="pi">:</span> <span class="s">5 minutes</span>
  <span class="na">Keyword NOT</span><span class="pi">:</span> <span class="s1">'</span><span class="s">"status":</span><span class="nv"> </span><span class="s">"CRITICAL"'</span>
  <span class="na">Alert</span><span class="pi">:</span> <span class="s">Immediate</span>

<span class="na">Freshness Monitor</span><span class="pi">:</span>
  <span class="na">Name</span><span class="pi">:</span> <span class="s">Marigold Tech News - Freshness</span>
  <span class="na">Type</span><span class="pi">:</span> <span class="s">HTTP(s) - Keyword</span>
  <span class="na">URL</span><span class="pi">:</span> <span class="s">https://marigold.cz/health-check/</span>
  <span class="na">Interval</span><span class="pi">:</span> <span class="s">15 minutes</span>
  <span class="na">Keyword</span><span class="pi">:</span> <span class="s1">'</span><span class="s">"articles_24h":'</span>
  <span class="na">Alert</span><span class="pi">:</span> <span class="s">2 consecutive failures</span>
</code></pre></div></div>

<h2 id="detekce-jazykovÃ½ch-problÃ©mÅ¯">Detekce JazykovÃ½ch ProblÃ©mÅ¯</h2>

<h3 id="jak-funguje-language-detection">Jak funguje Language Detection</h3>

<p>SystÃ©m pouÅ¾Ã­vÃ¡ <strong>dual-score approach</strong> pro maximÃ¡lnÃ­ pÅ™esnost:</p>

<ol>
  <li><strong>Czech Character Score (30% vÃ¡ha)</strong>
    <ul>
      <li>Detekuje ÄeskÃ© znaky: Ã¡ÄÄÃ©Ä›Ã­ÅˆÃ³Å™Å¡Å¥ÃºÅ¯Ã½Å¾</li>
      <li>SkÃ³re: poÄet ÄeskÃ½ch znakÅ¯ / 10 (max 1.0)</li>
    </ul>
  </li>
  <li><strong>Czech Word Score (70% vÃ¡ha)</strong>
    <ul>
      <li>Detekuje ÄeskÃ¡ klÃ­ÄovÃ¡ slova z pÅ™edem definovanÃ© sady</li>
      <li>Slova jako: kterÃ½, spoleÄnost, podle, bÄ›hem, pouze, atd.</li>
      <li>SkÃ³re: poÄet ÄeskÃ½ch slov / 5 (max 1.0)</li>
    </ul>
  </li>
  <li><strong>KombinovanÃ© skÃ³re</strong>
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">final_score</span> <span class="o">=</span> <span class="p">(</span><span class="n">char_score</span> <span class="o">*</span> <span class="mf">0.3</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">word_score</span> <span class="o">*</span> <span class="mf">0.7</span><span class="p">)</span>
<span class="c1"># 0.0 = angliÄtina
# 0.5 = neutrÃ¡lnÃ­ / nelze rozhodnout
# 1.0 = ÄeÅ¡tina
</span></code></pre></div>    </div>
  </li>
  <li><strong>Classification threshold</strong>
    <ul>
      <li>score &gt; 0.5 â†’ ÄeÅ¡tina</li>
      <li>score â‰¤ 0.5 â†’ angliÄtina</li>
    </ul>
  </li>
</ol>

<h3 id="testovanÃ©-scÃ©nÃ¡Å™e">TestovanÃ© scÃ©nÃ¡Å™e</h3>

<table>
  <thead>
    <tr>
      <th>Text</th>
      <th>Detekce</th>
      <th>SkÃ³re</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>â€œSpoleÄnost Google pÅ™edstavila novou funkciâ€</td>
      <td>âœ… ÄŒeÅ¡tina</td>
      <td>0.85+</td>
    </tr>
    <tr>
      <td>â€œGoogle announces new featureâ€</td>
      <td>âœ… AngliÄtina</td>
      <td>0.15-</td>
    </tr>
    <tr>
      <td>â€œGoogle pÅ™edstavuje new featureâ€</td>
      <td>âš ï¸ SmÃ­Å¡enÃ½</td>
      <td>0.4-0.6</td>
    </tr>
    <tr>
      <td>â€œ123 456 789â€</td>
      <td>âœ… AngliÄtina</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>

<h3 id="failure-scÃ©nÃ¡Å™e">Failure ScÃ©nÃ¡Å™e</h3>

<p><strong>ScÃ©nÃ¡Å™ 1: LLM API nedostupnÃ©</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Symptom: ÄŒlÃ¡nky zÅ¯stanou v angliÄtinÄ›
Detekce: czech_ratio &lt; 0.85
Alert: CRITICAL
Response:
  1. Zkontrolovat OPENROUTER_API_KEY
  2. Zkontrolovat LLM API status
  3. Zkontrolovat error logy v GitHub Actions
</code></pre></div></div>

<p><strong>ScÃ©nÃ¡Å™ 2: ÄŒÃ¡steÄnÃ© selhÃ¡nÃ­ pÅ™ekladu</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Symptom: NÄ›kterÃ© ÄlÃ¡nky v angliÄtinÄ›, nÄ›kterÃ© v ÄeÅ¡tinÄ›
Detekce: 0.70 &lt; czech_ratio &lt; 0.85
Alert: WARNING
Response:
  1. Zkontrolovat LLM cost limits
  2. Zkontrolovat rate limiting
  3. Review sample anglickÃ½ch ÄlÃ¡nkÅ¯ v /health-status/
</code></pre></div></div>

<p><strong>ScÃ©nÃ¡Å™ 3: Translation quality degradation</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Symptom: PÅ™eloÅ¾eno, ale Å¡patnÃ¡ kvalita
Detekce: czech_ratio OK, ale avg_content_length nÃ­zkÃ¡
Alert: WARNING (content_quality)
Response:
  1. Zkontrolovat LLM model parametry
  2. Review prompt template
  3. Zkontrolovat input data quality
</code></pre></div></div>

<h2 id="failure-detection--alerting">Failure Detection &amp; Alerting</h2>

<h3 id="detection-matrix">Detection Matrix</h3>

<table>
  <thead>
    <tr>
      <th>ProblÃ©m</th>
      <th>Detekce</th>
      <th>Threshold</th>
      <th>Alert Level</th>
      <th>Response Time</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>GenerovÃ¡nÃ­ selhalo</td>
      <td>articles_24h &lt; 10</td>
      <td>&lt; 10</td>
      <td>WARNING</td>
      <td>24h</td>
    </tr>
    <tr>
      <td>PÅ™eklad nefunguje</td>
      <td>czech_ratio &lt; 0.85</td>
      <td>&lt; 85%</td>
      <td>CRITICAL</td>
      <td>Immediate</td>
    </tr>
    <tr>
      <td>StarÃ¡ data</td>
      <td>newest_age &gt; 6h</td>
      <td>&gt; 6h</td>
      <td>WARNING</td>
      <td>12h</td>
    </tr>
    <tr>
      <td>Front matter error</td>
      <td>error_rate &gt; 0.10</td>
      <td>&gt; 10%</td>
      <td>WARNING</td>
      <td>24h</td>
    </tr>
    <tr>
      <td>KrÃ¡tkÃ½ obsah</td>
      <td>avg_length &lt; 300</td>
      <td>&lt; 300 char</td>
      <td>WARNING</td>
      <td>24h</td>
    </tr>
  </tbody>
</table>

<h3 id="alert-flow">Alert Flow</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Problem Detected
    â†“
Health Check creates alert
    â†“
Jekyll build includes alert in JSON
    â†“
Uptimerobot detects status change
    â†“
Uptimerobot sends notification
    â†“
Email / Slack / Webhook
    â†“
Manual investigation via /health-status/
</code></pre></div></div>

<h3 id="threshold-tuning-strategy">Threshold Tuning Strategy</h3>

<p><strong>Phase 1: Observation (prvnÃ­ 2 tÃ½dny)</strong></p>
<ul>
  <li>Nastavit benevolentnÃ­ thresholdy</li>
  <li>Sledovat metriky bez alertÅ¯</li>
  <li>Identifikovat normÃ¡lnÃ­ rozsah hodnot</li>
</ul>

<p><strong>Phase 2: Calibration (tÃ½den 3-4)</strong></p>
<ul>
  <li>Analyzovat nasbÃ­ranÃ¡ data</li>
  <li>Adjustovat thresholdy na P95 hodnoty</li>
  <li>Test alert flow</li>
</ul>

<p><strong>Phase 3: Production (ongoing)</strong></p>
<ul>
  <li>Monitor false positive/negative rate</li>
  <li>Monthly review a adjustace</li>
  <li>Document vÅ¡echny zmÄ›ny</li>
</ul>

<h2 id="testing-strategy">Testing Strategy</h2>

<h3 id="unit-tests">Unit Tests</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Spustit vÅ¡echny testy</span>
<span class="nb">cd</span> /Users/patrickzandl/GitHub/marigold-page
python <span class="nt">-m</span> pytest tests/test_health_check.py <span class="nt">-v</span>

<span class="c"># Spustit konkrÃ©tnÃ­ test class</span>
python <span class="nt">-m</span> pytest tests/test_health_check.py::TestLanguageDetection <span class="nt">-v</span>

<span class="c"># Test coverage</span>
python <span class="nt">-m</span> pytest tests/test_health_check.py <span class="nt">--cov</span><span class="o">=</span>scripts/tech_news_health_check
</code></pre></div></div>

<p><strong>Test Coverage:</strong></p>
<ul>
  <li>âœ… Language detection (czech, english, mixed, edge cases)</li>
  <li>âœ… Article parsing (valid, invalid YAML, missing front matter)</li>
  <li>âœ… Date parsing (multiple formats)</li>
  <li>âœ… Freshness checks (OK, WARNING scenarios)</li>
  <li>âœ… Language quality checks (all czech, too much english)</li>
  <li>âœ… Content quality metrics</li>
  <li>âœ… Front matter validation</li>
  <li>âœ… Overall status calculation</li>
  <li>âœ… Alert generation</li>
  <li>âœ… JSON output</li>
  <li>âœ… Edge cases (empty dir, nonexistent path, large content)</li>
</ul>

<h3 id="integration-tests">Integration Tests</h3>

<p><strong>Manual Test Procedure:</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 1. LokÃ¡lnÃ­ health check</span>
python scripts/tech_news_health_check.py <span class="nt">--output</span> _data/tech_news_health.json

<span class="c"># 2. Zkontrolovat vÃ½stup</span>
<span class="nb">cat </span>_data/tech_news_health.json | jq <span class="nb">.</span>

<span class="c"># 3. Build Jekyll</span>
bundle <span class="nb">exec </span>jekyll build

<span class="c"># 4. Test JSON endpoint</span>
<span class="nb">cat </span>_site/health-check/index.html | jq <span class="nb">.</span>

<span class="c"># 5. Test HTML dashboard (otevÅ™Ã­t v browseru)</span>
open _site/health-status/index.html

<span class="c"># 6. Simulate failure (doÄasnÄ› zmÄ›nit threshold)</span>
<span class="c"># Editovat tech_news_health_check.py:</span>
<span class="c">#   'min_czech_ratio': 1.0  # Nerealisticky vysokÃ½</span>
<span class="c"># Re-run a ovÄ›Å™it CRITICAL status</span>
</code></pre></div></div>

<h3 id="failure-simulation-tests">Failure Simulation Tests</h3>

<p><strong>Test 1: LLM Translation Failure</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># DoÄasnÄ› disable OPENROUTER_API_KEY v workflow</span>
<span class="c"># nebo nastavit na invalid value</span>
<span class="c"># â†’ OÄekÃ¡vÃ¡nÃ­: CRITICAL alert, czech_ratio &lt; 0.85</span>
</code></pre></div></div>

<p><strong>Test 2: NewsAPI Failure</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># DoÄasnÄ› disable NEWS_API_KEY</span>
<span class="c"># â†’ OÄekÃ¡vÃ¡nÃ­: CRITICAL alert, articles_24h = 0</span>
</code></pre></div></div>

<p><strong>Test 3: Stale Content</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># DoÄasnÄ› disable GitHub Actions schedule</span>
<span class="c"># PoÄkat 7+ hodin</span>
<span class="c"># â†’ OÄekÃ¡vÃ¡nÃ­: WARNING alert, newest_age_hours &gt; 6</span>
</code></pre></div></div>

<h2 id="monitoring-best-practices">Monitoring Best Practices</h2>

<h3 id="daily-checks-automated">Daily Checks (Automated)</h3>

<ul>
  <li>âœ… Uptimerobot emails pro CRITICAL alerts</li>
  <li>âœ… Auto-generated health data pÅ™i kaÅ¾dÃ©m build</li>
  <li>âœ… GitHub Actions workflow status notifications</li>
</ul>

<h3 id="weekly-review-manual---15-min">Weekly Review (Manual - 15 min)</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 1. Zkontrolovat Uptimerobot dashboard</span>
<span class="c"># https://uptimerobot.com/dashboard</span>

<span class="c"># 2. Review /health-status/ trendy</span>
<span class="c"># https://marigold.cz/health-status/</span>

<span class="c"># 3. Zkontrolovat GitHub Actions success rate</span>
gh run list <span class="nt">--workflow</span><span class="o">=</span>tech-news.yml <span class="nt">--limit</span> 50 | <span class="nb">grep</span> <span class="nt">-c</span> <span class="s2">"completed.*success"</span>

<span class="c"># 4. Review alert history</span>
<span class="c"># Zkontrolovat email inbox pro uptimerobot alerts</span>

<span class="c"># 5. Check LLM costs (optional)</span>
python scripts/generate_llm_cost_report.py <span class="nt">--summary-only</span>
</code></pre></div></div>

<h3 id="monthly-deep-dive-manual---1-hour">Monthly Deep Dive (Manual - 1 hour)</h3>

<ol>
  <li><strong>Metrics Analysis</strong>
    <ul>
      <li>Download monthâ€™s health data</li>
      <li>Plot czech_ratio, articles_24h, avg_content_length trends</li>
      <li>Identify anomalies or degradation patterns</li>
    </ul>
  </li>
  <li><strong>Threshold Review</strong>
    <ul>
      <li>Analyze false positive/negative rate</li>
      <li>Adjust thresholds if needed</li>
      <li>Document changes in changelog</li>
    </ul>
  </li>
  <li><strong>Test Coverage</strong>
    <ul>
      <li>Run full test suite</li>
      <li>Add new tests for discovered edge cases</li>
      <li>Update documentation</li>
    </ul>
  </li>
  <li><strong>Incident Post-Mortems</strong>
    <ul>
      <li>Review vÅ¡echny CRITICAL incidents</li>
      <li>Root cause analysis</li>
      <li>Preventive measures</li>
    </ul>
  </li>
</ol>

<h2 id="troubleshooting-guide">Troubleshooting Guide</h2>

<h3 id="problem-false-positive---alert-ale-vÅ¡e-funguje">Problem: False Positive - Alert ale vÅ¡e funguje</h3>

<p><strong>Debug kroky:</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 1. Zkontrolovat live JSON</span>
curl <span class="nt">-s</span> https://marigold.cz/health-check/ | jq <span class="nb">.</span>

<span class="c"># 2. Zkontrolovat lokÃ¡lnÃ­ health data</span>
<span class="nb">cat </span>_data/tech_news_health.json | jq <span class="nb">.</span>

<span class="c"># 3. Porovnat timestamp</span>
<span class="c"># Pokud se liÅ¡Ã­ â†’ Jekyll build selhal nebo nenÃ­ deployed</span>

<span class="c"># 4. Zkontrolovat poslednÃ­ GitHub Actions run</span>
gh run view <span class="nt">--workflow</span><span class="o">=</span>tech-news.yml

<span class="c"># 5. Zkontrolovat deployment status</span>
gh workflow view pages-build-deployment
</code></pre></div></div>

<p><strong>Possible causes:</strong></p>
<ul>
  <li>Uptimerobot cache (rare)</li>
  <li>Jekyll build failure â†’ starÃ½ JSON deployed</li>
  <li>Threshold pÅ™Ã­liÅ¡ pÅ™Ã­snÃ½</li>
  <li>Network glitch (transient)</li>
</ul>

<h3 id="problem-false-negative---Å¾Ã¡dnÃ½-alert-ale-problÃ©m-existuje">Problem: False Negative - Å½Ã¡dnÃ½ alert ale problÃ©m existuje</h3>

<p><strong>Debug kroky:</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 1. Zkontrolovat /health-status/ vizuÃ¡lnÄ›</span>
open https://marigold.cz/health-status/

<span class="c"># 2. Zkontrolovat alerts array v JSON</span>
curl <span class="nt">-s</span> https://marigold.cz/health-check/ | jq <span class="s1">'.alerts'</span>

<span class="c"># 3. Zkontrolovat uptimerobot keyword configuration</span>
<span class="c"># Je keyword matching sprÃ¡vnÄ› nastavenÃ½?</span>

<span class="c"># 4. Manual threshold test</span>
python scripts/tech_news_health_check.py
<span class="c"># Zkontrolovat console output pro expected alerts</span>
</code></pre></div></div>

<p><strong>Possible causes:</strong></p>
<ul>
  <li>Uptimerobot keyword pÅ™Ã­liÅ¡ benevolentnÃ­</li>
  <li>Threshold pÅ™Ã­liÅ¡ tolerantnÃ­</li>
  <li>Uptimerobot interval pÅ™Ã­liÅ¡ dlouhÃ½</li>
  <li>Alert contact not configured</li>
</ul>

<h3 id="problem-ÄlÃ¡nky-v-angliÄtinÄ›-ale-Å¾Ã¡dnÃ½-alert">Problem: ÄŒlÃ¡nky v angliÄtinÄ› ale Å¾Ã¡dnÃ½ alert</h3>

<p><strong>DiagnÃ³za:</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 1. Zkontrolovat czech_ratio metric</span>
curl <span class="nt">-s</span> https://marigold.cz/health-check/ | jq <span class="s1">'.metrics.czech_ratio'</span>

<span class="c"># 2. Zkontrolovat sample anglickÃ½ch ÄlÃ¡nkÅ¯</span>
curl <span class="nt">-s</span> https://marigold.cz/health-check/ | jq <span class="s1">'.checks.language.english_articles_sample'</span>

<span class="c"># 3. Manual language detection test</span>
python3 <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
import sys
sys.path.insert(0, 'scripts')
from tech_news_health_check import TechNewsHealthCheck

checker = TechNewsHealthCheck()
score = checker._detect_language("Your test article text here")
print(f"Language score: {score}")
print(f"Classification: {'Czech' if score &gt; 0.5 else 'English'}")
</span><span class="no">EOF
</span></code></pre></div></div>

<p><strong>MoÅ¾nÃ© pÅ™Ã­Äiny:</strong></p>
<ol>
  <li><strong>Language detection false negative</strong>
    <ul>
      <li>Text obsahuje nÄ›kterÃ¡ ÄeskÃ¡ slova â†’ skÃ³re &gt; 0.5</li>
      <li>Å˜eÅ¡enÃ­: Adjustovat CZECH_WORDS slovnÃ­k nebo thresholdy</li>
    </ul>
  </li>
  <li><strong>Threshold pÅ™Ã­liÅ¡ nÃ­zkÃ½</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">min_czech_ratio</code> = 0.85 ale actual = 0.87 (vÄ›tÅ¡inou angliÄtina)</li>
      <li>Å˜eÅ¡enÃ­: ZvÃ½Å¡it threshold na 0.95</li>
    </ul>
  </li>
  <li><strong>Sample size pÅ™Ã­liÅ¡ malÃ½</strong>
    <ul>
      <li>Kontroluje se max 100 ÄlÃ¡nkÅ¯, anglickÃ© jsou starÅ¡Ã­</li>
      <li>Å˜eÅ¡enÃ­: ZvÃ½Å¡it sample size nebo kontrolovat nejnovÄ›jÅ¡Ã­ pouze</li>
    </ul>
  </li>
</ol>

<h3 id="problem-health-check-script-selhÃ¡vÃ¡">Problem: Health check script selhÃ¡vÃ¡</h3>

<p><strong>Debug kroky:</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 1. Spustit s verbose logging</span>
python scripts/tech_news_health_check.py 2&gt;&amp;1 | <span class="nb">tee </span>health_check.log

<span class="c"># 2. Zkontrolovat Python dependencies</span>
pip list | <span class="nb">grep</span> <span class="nt">-E</span> <span class="s1">'yaml|requests|beautifulsoup4|python-dateutil'</span>

<span class="c"># 3. Zkontrolovat _tech_news directory permissions</span>
<span class="nb">ls</span> <span class="nt">-la</span> _tech_news/ | <span class="nb">head</span>

<span class="c"># 4. Test s minimal dataset</span>
<span class="nb">mkdir</span> /tmp/test_tech_news
<span class="nb">cp </span>_tech_news/2025-11-<span class="k">*</span>.md /tmp/test_tech_news/
python scripts/tech_news_health_check.py <span class="nt">--tech-news-dir</span> /tmp/test_tech_news

<span class="c"># 5. Spustit unit tests</span>
python <span class="nt">-m</span> pytest tests/test_health_check.py <span class="nt">-v</span>
</code></pre></div></div>

<h2 id="maintenance--updates">Maintenance &amp; Updates</h2>

<h3 id="when-to-update-thresholds">When to Update Thresholds</h3>

<p><strong>Indicators for threshold adjustments:</strong></p>

<ol>
  <li><strong>Too many false positives (&gt; 2/week)</strong>
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Loosen thresholds
</span><span class="s">'min_articles_24h'</span><span class="p">:</span> <span class="mi">10</span> <span class="err">â†’</span> <span class="mi">8</span>
<span class="s">'max_age_hours'</span><span class="p">:</span> <span class="mi">6</span> <span class="err">â†’</span> <span class="mi">8</span>
<span class="s">'min_czech_ratio'</span><span class="p">:</span> <span class="mf">0.85</span> <span class="err">â†’</span> <span class="mf">0.80</span>
</code></pre></div>    </div>
  </li>
  <li><strong>False negatives (missed real issues)</strong>
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Tighten thresholds
</span><span class="s">'min_czech_ratio'</span><span class="p">:</span> <span class="mf">0.85</span> <span class="err">â†’</span> <span class="mf">0.90</span>
<span class="s">'max_age_hours'</span><span class="p">:</span> <span class="mi">6</span> <span class="err">â†’</span> <span class="mi">4</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Seasonal patterns (weekends, holidays)</strong>
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Consider time-based thresholds
</span><span class="k">if</span> <span class="n">is_weekend</span><span class="p">():</span>
    <span class="s">'min_articles_24h'</span><span class="p">:</span> <span class="mi">5</span>
<span class="k">else</span><span class="p">:</span>
    <span class="s">'min_articles_24h'</span><span class="p">:</span> <span class="mi">10</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="when-to-add-new-checks">When to Add New Checks</h3>

<p><strong>Indicators:</strong></p>

<ol>
  <li><strong>Recurring manual investigations</strong>
    <ul>
      <li>Pokud opakovanÄ› manuÃ¡lnÄ› kontrolujete stejnou vÄ›c</li>
      <li>â†’ Automatizovat to jako novÃ½ check</li>
    </ul>
  </li>
  <li><strong>New failure mode discovered</strong>
    <ul>
      <li>Incident post-mortem odhalil novÃ½ problÃ©m</li>
      <li>â†’ PÅ™idat check kterÃ½ by to detekoval</li>
    </ul>
  </li>
  <li><strong>Quality regression</strong>
    <ul>
      <li>Kvalita obsahu klesÃ¡ ale existing checks to nedetekujÃ­</li>
      <li>â†’ PÅ™idat novÃ© quality metrics</li>
    </ul>
  </li>
</ol>

<p><strong>Example - pÅ™idÃ¡nÃ­ novÃ©ho check:</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># V tech_news_health_check.py
</span>
<span class="k">def</span> <span class="nf">_check_duplicate_articles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">articles</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]):</span>
    <span class="s">"""Kontrola duplicitnÃ­ch ÄlÃ¡nkÅ¯"""</span>
    <span class="n">logger</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="s">"ğŸ” Kontroluji duplicity..."</span><span class="p">)</span>

    <span class="n">seen_urls</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="n">duplicates</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">article</span> <span class="ow">in</span> <span class="n">articles</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">article</span><span class="p">[</span><span class="s">'front_matter'</span><span class="p">].</span><span class="n">get</span><span class="p">(</span><span class="s">'url'</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">seen_urls</span><span class="p">:</span>
            <span class="n">duplicates</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">seen_urls</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="n">duplicate_rate</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">duplicates</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">articles</span><span class="p">)</span> <span class="k">if</span> <span class="n">articles</span> <span class="k">else</span> <span class="mi">0</span>

    <span class="bp">self</span><span class="p">.</span><span class="n">results</span><span class="p">[</span><span class="s">'metrics'</span><span class="p">][</span><span class="s">'duplicate_rate'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">duplicate_rate</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="bp">self</span><span class="p">.</span><span class="n">results</span><span class="p">[</span><span class="s">'checks'</span><span class="p">][</span><span class="s">'duplicates'</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'status'</span><span class="p">:</span> <span class="s">'CRITICAL'</span> <span class="k">if</span> <span class="n">duplicate_rate</span> <span class="o">&gt;</span> <span class="mf">0.05</span> <span class="k">else</span> <span class="s">'OK'</span><span class="p">,</span>
        <span class="s">'duplicate_count'</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">duplicates</span><span class="p">),</span>
        <span class="s">'duplicate_rate'</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">duplicate_rate</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">duplicate_rate</span> <span class="o">&gt;</span> <span class="mf">0.05</span><span class="p">:</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">_add_critical_alert</span><span class="p">(</span>
            <span class="sa">f</span><span class="s">"DuplicitnÃ­ ÄlÃ¡nky: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">duplicates</span><span class="p">)</span><span class="si">}</span><span class="s"> (</span><span class="si">{</span><span class="n">duplicate_rate</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="p">.</span><span class="mi">1</span><span class="n">f</span><span class="si">}</span><span class="s">%)"</span>
        <span class="p">)</span>

<span class="c1"># PÅ™idat do run_all_checks():
</span><span class="k">def</span> <span class="nf">run_all_checks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># ... existing checks ...
</span>    <span class="bp">self</span><span class="p">.</span><span class="n">_check_duplicate_articles</span><span class="p">(</span><span class="n">articles</span><span class="p">)</span>
    <span class="c1"># ...
</span></code></pre></div></div>

<h3 id="version-control--changelog">Version Control &amp; Changelog</h3>

<p><strong>DÅ¯leÅ¾itÃ© zmÄ›ny dokumentovat v:</strong></p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">docs/HEALTH_CHECK_SYSTEM.md</code> (tento soubor)</li>
  <li>Git commit messages</li>
  <li>GitHub releases/tags pro major updates</li>
</ul>

<p><strong>Changelog format:</strong></p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gu">## 2025-11-14 - Initial Release</span>
<span class="p">-</span> âœ¨ ImplementovÃ¡n zÃ¡kladnÃ­ health check systÃ©m
<span class="p">-</span> âœ… Language detection (czech vs english)
<span class="p">-</span> âœ… Freshness monitoring
<span class="p">-</span> âœ… Content quality checks
<span class="p">-</span> âœ… Front matter validation
<span class="p">-</span> ğŸ“Š Uptimerobot integration

<span class="gu">## 2025-11-XX - Update (example)</span>
<span class="p">-</span> ğŸ”§ Adjusted min_czech_ratio threshold: 0.85 â†’ 0.90
<span class="p">-</span> âœ¨ Added duplicate article detection
<span class="p">-</span> ğŸ› Fixed date parsing for timezone edge cases
<span class="p">-</span> ğŸ“ Updated Uptimerobot setup documentation
</code></pre></div></div>

<h2 id="odkazy-a-reference">Odkazy a Reference</h2>

<h3 id="dokumentace">Dokumentace</h3>
<ul>
  <li><strong>Tento soubor:</strong> KompletnÃ­ systÃ©movÃ¡ dokumentace</li>
  <li><strong><code class="language-plaintext highlighter-rouge">docs/UPTIMEROBOT_SETUP.md</code>:</strong> DetailnÃ­ Uptimerobot konfigurace</li>
  <li><strong><code class="language-plaintext highlighter-rouge">CLAUDE.md</code>:</strong> Projekt-wide development guidelines</li>
</ul>

<h3 id="scripts">Scripts</h3>
<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">scripts/tech_news_health_check.py</code>:</strong> Main health check script</li>
  <li><strong><code class="language-plaintext highlighter-rouge">tests/test_health_check.py</code>:</strong> Comprehensive test suite</li>
</ul>

<h3 id="endpoints">Endpoints</h3>
<ul>
  <li><strong>JSON:</strong> https://marigold.cz/health-check/</li>
  <li><strong>HTML:</strong> https://marigold.cz/health-status/</li>
</ul>

<h3 id="external-services">External Services</h3>
<ul>
  <li><strong>Uptimerobot:</strong> https://uptimerobot.com/</li>
  <li><strong>GitHub Actions:</strong> https://github.com/username/marigold-page/actions</li>
  <li><strong>OpenRouter (LLM):</strong> https://openrouter.ai/</li>
</ul>

<h3 id="support">Support</h3>
<ul>
  <li><strong>Issues:</strong> GitHub Issues</li>
  <li><strong>Email:</strong> vÃ¡Å¡@email.cz</li>
</ul>

<hr />

<p><strong>Last Updated:</strong> 2025-11-14
<strong>Version:</strong> 1.0.0
<strong>Maintainer:</strong> Patrick Zandl</p>

  </div>
</article>

        </div>
      </div>

      <div class="wrapper-footer">
        <div class="container">
          <footer class="site-footer">
  <div class="footer-compact">
    <!-- Å˜Ã¡dek 1: SociÃ¡lnÃ­ ikony + Copyright -->
    <div class="footer-row footer-social-row">
      <div class="social-icons">
        
          <a href="mailto:patrick.zandl@marigold.cz" title="Email" aria-label="Email">
            <i class="svg-icon email"></i>
          </a>
        
        
          <a href="https://www.facebook.com/patrick.zandl" title="Facebook" aria-label="Facebook">
            <i class="svg-icon facebook"></i>
          </a>
        
        
          <a href="https://www.twitter.com/tangero" title="Twitter" aria-label="Twitter">
            <i class="svg-icon twitter"></i>
          </a>
        
        
          <a href="https://www.linkedin.com/in/patrickzandl" title="LinkedIn" aria-label="LinkedIn">
            <i class="svg-icon linkedin"></i>
          </a>
        
        
          <a href="/feed.xml" title="RSS Feed" aria-label="RSS Feed">
            <i class="svg-icon rss"></i>
          </a>
        
      </div>
      <div class="copyright">
        &copy; 2025 Marigold.cz
      </div>
    </div>

    <!-- Å˜Ã¡dek 2: Projekty -->
    <div class="footer-row footer-projects-row">
      <a href="https://www.marigold.cz">Marigold.cz</a> |
      <a href="https://www.zitraslavni.cz">ZÃ­tÅ™aslavnÃ­.cz</a> |
      <a href="https://www.vibecoding.cz">VibeCoding.cz</a> |
      <a href="https://www.topflix.cz">TopFlix.cz</a> |
      <a href="https://zandl.substack.com">Substack</a> |
      <a href="https://www.kronium.eu">Fenix svÃ­tilny</a> |
      <a href="https://www.vybavenidoprirody.com/">VybavenÃ­ do pÅ™Ã­rody</a> |
      <a href="https://www.brandysboleslav.cz/">BrandÃ½s nad Labem</a> |
      <a href="https://skola.prolnuto.cz/">LetnÃ­ Å¡kola AI</a> |
      <a href="/changelog/">Changelog</a>
    </div>

    <!-- Å˜Ã¡dek 3: Badges -->
    <div class="footer-row footer-partners-row">
      <a title="GDPR-compliant Web Analytics" href="https://clicky.com/101451859">
        <img alt="Clicky" src="//static.getclicky.com/media/links/badge.gif" border="0" />
      </a>
      <a href="https://github.com/tangero/marigold-page">
        <img src="https://img.shields.io/github/last-commit/tangero/marigold-page" alt="GitHub Last Commit">
      </a>
    </div>
  </div>
</footer>

<!-- Analytics skripty -->
<!-- Clicky Analytics -->
<script async data-id="101451859" src="//static.getclicky.com/js"></script>
<noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/101451859ns.gif" /></p></noscript>

<!-- Simple Analytics (100% privacy-first) -->
<script async src="https://scripts.simpleanalyticscdn.com/latest.js"></script>


        </div>
      </div>
    </div>

    <!-- Clicky Analytics -->
<script async data-id="101451859" src="//static.getclicky.com/js"></script>
<noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/101451859ns.gif" /></p></noscript>

<!-- Simple Analytics (100% privacy-first) -->
<script async src="https://scripts.simpleanalyticscdn.com/latest.js"></script>


    <script>
    function toggleDetails(button) {
      const content = button.nextElementSibling;
      const isCollapsed = button.classList.contains('collapsed');

      if (isCollapsed) {
        button.classList.remove('collapsed');
        content.classList.add('show');
      } else {
        button.classList.add('collapsed');
        content.classList.remove('show');
      }
    }

    // NavigaÄnÃ­ dropdown
    (function() {
      const dropdownToggle = document.querySelector('.nav-dropdown-toggle');
      const dropdownMenu = document.querySelector('.nav-dropdown-menu');

      if (dropdownToggle && dropdownMenu) {
        // Toggle dropdown pÅ™i kliknutÃ­
        dropdownToggle.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          const isExpanded = dropdownToggle.getAttribute('aria-expanded') === 'true';

          dropdownToggle.setAttribute('aria-expanded', !isExpanded);
          dropdownMenu.classList.toggle('show');
        });

        // ZavÅ™Ã­t pÅ™i kliknutÃ­ mimo
        document.addEventListener('click', function(e) {
          if (!e.target.closest('.nav-dropdown')) {
            dropdownToggle.setAttribute('aria-expanded', 'false');
            dropdownMenu.classList.remove('show');
          }
        });

        // Keyboard navigation
        dropdownToggle.addEventListener('keydown', function(e) {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            dropdownToggle.click();
          }
        });

        // Escape key zavÅ™e menu
        document.addEventListener('keydown', function(e) {
          if (e.key === 'Escape') {
            dropdownToggle.setAttribute('aria-expanded', 'false');
            dropdownMenu.classList.remove('show');
          }
        });
      }
    })();
    </script>
  </body>
</html>
