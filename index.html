---
layout: default
---

<!-- start feedwind code -->
<script>
  function shouldShowFeedwind() {
    const lastShown = localStorage.getItem('feedwindLastShown');
    if (!lastShown) {
      localStorage.setItem('feedwindLastShown', new Date().toISOString());
      return true;
    }

    const lastDate = new Date(lastShown);
    const now = new Date();
    const monthsDiff = (now.getFullYear() - lastDate.getFullYear()) * 12 +
                      (now.getMonth() - lastDate.getMonth());

    if (monthsDiff >= 1) {
      localStorage.setItem('feedwindLastShown', now.toISOString());
      return true;
    }
    return false;
  }

  if (shouldShowFeedwind()) {
    const script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = 'https://feed.mikle.com/js/fw-loader.js';
    script.setAttribute('preloader-text', 'Nahr√°v√°m');
    script.setAttribute('data-fw-param', '168257/');
    document.head.appendChild(script);
  }
</script>
<!-- end feedwind code -->


<div class="posts">
  {% assign all_posts = site.posts %}

  {% for ai_post in site.ai %}
    {% assign all_posts = all_posts | push: ai_post %}
  {% endfor %}

  {% for mobile_post in site.mobilnisite %}
    {% assign all_posts = all_posts | push: mobile_post %}
  {% endfor %}

  {% assign filtered_posts = '' | split: '' %}
  {% assign sorted_posts = all_posts | sort: 'date' | reverse %}

  {% for post in sorted_posts %}
    {% if post.hide == null or post.hide == false %}
      {% if post.lang != 'en' %}
        {% assign filtered_posts = filtered_posts | push: post %}
      {% endif %}
    {% endif %}
  {% endfor %}

  {% assign total_posts = filtered_posts | size %}
  {% assign per_page = 15 %}
  {% assign total_pages = total_posts | divided_by: per_page | plus: 1 %}
  {% assign offset = paginator.page | minus: 1 | times: per_page %}

  <!-- Audio Player -->
  <!-- P≈ôiprav audio playlist data - vezmi V≈†ECHNY ƒçl√°nky, ne jen aktu√°ln√≠ str√°nku -->
  {% assign audio_posts = '' | split: '' %}
  {% for post in filtered_posts %}
    {% if post.audio_url and post.audio_url != '' %}
      {% assign audio_posts = audio_posts | push: post %}
    {% endif %}
  {% endfor %}

  <div id="audio-player" style="display: none;">
    <div class="audio-controls">
      <button id="play-pause" title="P≈ôehr√°t/Pozastavit">‚ñ∂Ô∏è</button>
      <button id="prev-track" title="P≈ôedchoz√≠">‚èÆÔ∏è</button>
      <button id="next-track" title="Dal≈°√≠">‚è≠Ô∏è</button>
      <span id="track-title">Naƒç√≠t√°m playlist...</span>
      <div class="progress-container">
        <div class="progress-bar" id="progress"></div>
      </div>
      <span id="track-time">0:00 / 0:00</span>
    </div>
    <audio id="audio-element" preload="none"></audio>
  </div>

  <script>
  document.addEventListener('DOMContentLoaded', function() {
    // Vytvo≈ô playlist z posledn√≠ch 20 ƒçl√°nk≈Ø s audio
    const playlist = [
      {% for post in audio_posts limit: 20 %}
      {
        title: "{{ post.title | escape }}",
        url: "{{ post.audio_url }}",
        date: "{{ post.date | date: '%d.%m.%Y' }}"
      }{% unless forloop.last %},{% endunless %}
      {% endfor %}
    ];

    if (playlist.length === 0) return;

    // Zobraz p≈ôehr√°vaƒç
    const player = document.getElementById('audio-player');
    player.style.display = 'block';

    const audio = document.getElementById('audio-element');
    const playPauseBtn = document.getElementById('play-pause');
    const prevBtn = document.getElementById('prev-track');
    const nextBtn = document.getElementById('next-track');
    const trackTitle = document.getElementById('track-title');
    const progress = document.getElementById('progress');
    const trackTime = document.getElementById('track-time');

    let currentTrack = 0;
    let isPlaying = false;

    function loadTrack(index) {
      if (index >= playlist.length || index < 0) return;
      currentTrack = index;
      const track = playlist[currentTrack];
      audio.src = track.url;
      trackTitle.textContent = `${track.title} (${track.date})`;
      progress.style.width = '0%';
      trackTime.textContent = '0:00 / 0:00';
    }

    function formatTime(seconds) {
      const mins = Math.floor(seconds / 60);
      const secs = Math.floor(seconds % 60);
      return `${mins}:${secs.toString().padStart(2, '0')}`;
    }

    function updateProgress() {
      if (audio.duration) {
        const progressPercent = (audio.currentTime / audio.duration) * 100;
        progress.style.width = progressPercent + '%';
        trackTime.textContent = `${formatTime(audio.currentTime)} / ${formatTime(audio.duration)}`;
      }
    }

    playPauseBtn.addEventListener('click', function() {
      if (isPlaying) {
        audio.pause();
        playPauseBtn.textContent = '‚ñ∂Ô∏è';
        isPlaying = false;
      } else {
        audio.play();
        playPauseBtn.textContent = '‚è∏Ô∏è';
        isPlaying = true;
      }
    });

    prevBtn.addEventListener('click', function() {
      currentTrack = currentTrack > 0 ? currentTrack - 1 : playlist.length - 1;
      loadTrack(currentTrack);
      if (isPlaying) audio.play();
    });

    nextBtn.addEventListener('click', function() {
      currentTrack = currentTrack < playlist.length - 1 ? currentTrack + 1 : 0;
      loadTrack(currentTrack);
      if (isPlaying) audio.play();
    });

    audio.addEventListener('timeupdate', updateProgress);

    audio.addEventListener('ended', function() {
      nextBtn.click();
    });

    audio.addEventListener('loadedmetadata', function() {
      updateProgress();
    });

    // Naƒçti prvn√≠ skladbu
    loadTrack(0);
  });
  </script>

  <style>
  #audio-player {
    background: #f5f5f5;
    border: 1px solid #ddd;
    border-radius: 6px;
    padding: 10px;
    margin-bottom: 20px;
    position: sticky;
    top: 10px;
    z-index: 100;
  }

  .audio-controls {
    display: flex;
    align-items: center;
    gap: 10px;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  }

  .audio-controls button {
    background: none;
    border: none;
    font-size: 16px;
    cursor: pointer;
    padding: 5px;
    border-radius: 3px;
    transition: background-color 0.2s;
  }

  .audio-controls button:hover {
    background-color: rgba(0,0,0,0.1);
  }

  #track-title {
    flex: 1;
    font-weight: 500;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 0;
  }

  .progress-container {
    width: 100px;
    height: 4px;
    background: #ddd;
    border-radius: 2px;
    overflow: hidden;
    cursor: pointer;
  }

  .progress-bar {
    height: 100%;
    background: #007cba;
    width: 0%;
    transition: width 0.1s;
  }

  #track-time {
    font-size: 12px;
    color: #666;
    white-space: nowrap;
  }

  @media (max-width: 768px) {
    .audio-controls {
      gap: 5px;
    }

    #track-title {
      font-size: 14px;
    }

    .progress-container {
      width: 80px;
    }

    #track-time {
      font-size: 11px;
    }
  }
  </style>

  <!-- Tech News Section -->
  {% assign high_importance_news = site.tech_news | where_exp: "article", "article.importance >= 4" | sort: 'publishedAt' | reverse | limit: 5 %}

  {% if high_importance_news.size > 0 %}
  <div id="tech-news-brief">
    <div class="tech-news-header">
      <h2 class="tech-news-title">Tech News</h2>
      <a href="/tech-news/" class="tech-news-all">V√≠ce zpr√°v ‚Üí</a>
    </div>

    <ul class="tech-news-list">
      {% for article in high_importance_news %}
      {% assign slug_len = article.slug | size %}
      {% assign last_idx = slug_len | minus: 1 %}
      {% assign last_char = article.slug | slice: last_idx %}
      {% if last_char == '-' %}
        {% assign clean_slug = article.slug | slice: 0, last_idx %}
      {% else %}
        {% assign clean_slug = article.slug %}
      {% endif %}
      <li class="tech-news-item">
        <a href="/tech-news/{{ article.date | date: '%Y-%m-%d' }}/{{ clean_slug }}/" class="tech-news-link">
          <span class="tech-news-source">{{ article.source.emoji }}</span>
          <span class="tech-news-text">{{ article.title }}</span>
        </a>
      </li>
      {% endfor %}
    </ul>
  </div>

  <style>
  #tech-news-brief {
    background: linear-gradient(135deg, #f8f9fa 0%, #f5f5f5 100%);
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 16px 20px;
    margin-bottom: 32px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  }

  .tech-news-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 14px;
    padding-bottom: 10px;
    border-bottom: 2px solid #e0e0e0;
  }

  .tech-news-title {
    margin: 0;
    font-size: 18px;
    font-weight: 600;
    color: #2c3e50;
    letter-spacing: -0.3px;
  }

  .tech-news-all {
    font-size: 14px;
    color: #007cba;
    text-decoration: none;
    font-weight: 500;
    transition: all 0.2s ease;
    padding: 4px 8px;
    border-radius: 4px;
  }

  .tech-news-all:hover {
    color: #005a8c;
    background-color: rgba(0,124,186,0.08);
  }

  .tech-news-list {
    list-style: none;
    margin: 0;
    padding: 0;
  }

  .tech-news-item {
    margin-bottom: 6px;
    padding-left: 0;
  }

  .tech-news-item:last-child {
    margin-bottom: 0;
  }

  .tech-news-link {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 8px 10px;
    border-radius: 5px;
    text-decoration: none;
    color: #34495e;
    transition: all 0.2s ease;
    line-height: 1.5;
  }

  .tech-news-link:hover {
    background-color: rgba(255,255,255,0.8);
    transform: translateX(3px);
  }

  .tech-news-source {
    flex-shrink: 0;
    font-size: 16px;
    line-height: 1.5;
  }

  .tech-news-text {
    flex: 1;
    font-size: 15px;
    font-weight: 400;
    color: #2c3e50;
    line-height: 1.5;
  }

  .tech-news-link:hover .tech-news-text {
    color: #007cba;
  }

  @media (max-width: 768px) {
    #tech-news-brief {
      padding: 14px 16px;
      margin-bottom: 24px;
      border-radius: 6px;
    }

    .tech-news-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 8px;
      margin-bottom: 12px;
    }

    .tech-news-title {
      font-size: 16px;
    }

    .tech-news-all {
      font-size: 13px;
      align-self: flex-end;
    }

    .tech-news-link {
      gap: 8px;
      padding: 6px 8px;
    }

    .tech-news-source {
      font-size: 14px;
    }

    .tech-news-text {
      font-size: 14px;
    }

    .tech-news-item {
      margin-bottom: 8px;
    }
  }
  </style>
  {% endif %}

  {% for post in filtered_posts limit: per_page offset: offset %}
    <article class="post">
      <h1><a href="{{ post.url }}">{{ post.title }}</a></h1>

      <div class="post-content clearfix">
        {% if post.thumbnail %}
          {% assign thumbnail_url = post.thumbnail | replace: 'http://', 'https://' %}
          <div class="thumbnail">
            <a href="{{ post.url }}">
              <img src="https://res.cloudinary.com/dvwv5cne3/image/fetch/w_300,h_200,c_fill,g_auto,f_auto,q_auto/{{ thumbnail_url }}" alt="{{ post.title }}">
            </a>
          </div>
        {% endif %}

        <div class="excerpt">
          {{ post.excerpt | strip_html | truncatewords: 60 }}
        </div>
      </div>

      <div class="post-meta">
        {% assign m = post.date | date: "%-m" %}
        {{ post.date | date: "%-d." }}
        {% case m %}
          {% when '1' %}leden
          {% when '2' %}√∫nor
          {% when '3' %}b≈ôezen
          {% when '4' %}duben
          {% when '5' %}kvƒõten
          {% when '6' %}ƒçerven
          {% when '7' %}ƒçervenec
          {% when '8' %}srpen
          {% when '9' %}z√°≈ô√≠
          {% when '10' %}≈ô√≠jen
          {% when '11' %}listopad
          {% when '12' %}prosinec
        {% endcase %}
        {{ post.date | date: "%Y" }} -
        <a href="{{ post.url }}" class="read-more">Pokraƒçuj ve ƒçten√≠ üëâ</a> {% if post.audio_url %}nebo <a href="{{ post.audio_url }}" target="_blank">üéß Poslechnout audio</a>{% endif %}
      </div>
    </article>
  {% endfor %}

  <!-- pagination -->
  {% if total_pages > 1 %}
  <div class="pagination">
    {% if paginator.previous_page %}
      <a href="{{ paginator.previous_page_path }}" class="previous">
        üëà novƒõj≈°√≠
      </a>
    {% else %}
      <span class="previous">Nejnovƒõj≈°√≠</span>
    {% endif %}

    <span class="page_number">
      str√°nka {{ paginator.page }} z {{ total_pages }}
    </span>

    {% if paginator.next_page %}
      <a href="{{ paginator.next_page_path }}" class="next">star≈°√≠ üëâ</a>
    {% else %}
      <span class="next">Nejstar≈°√≠</span>
    {% endif %}
  </div>
  {% endif %}
</div>
