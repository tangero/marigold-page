<!DOCTYPE html>
<html>
  <head>
    <title>üîç Anal√Ωza selh√°n√≠ OneSignal notifikace - Zohran Mamdani ƒçl√°nek | Marigold.cz - S√≠tƒõ a Technologie</title>
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="üîç Anal√Ωza selh√°n√≠ OneSignal notifikace - Zohran Mamdani ƒçl√°nek" />
<meta name="author" content="Patrick Zandl" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Technologie a Svƒõt" />
<meta property="og:description" content="Technologie a Svƒõt" />
<link rel="canonical" href="https://www.marigold.cz/NOTIFICATION_FAILURE_ANALYSIS/" />
<meta property="og:url" content="https://www.marigold.cz/NOTIFICATION_FAILURE_ANALYSIS/" />
<meta property="og:site_name" content="Marigold.cz" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="üîç Anal√Ωza selh√°n√≠ OneSignal notifikace - Zohran Mamdani ƒçl√°nek" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Patrick Zandl"},"description":"Technologie a Svƒõt","headline":"üîç Anal√Ωza selh√°n√≠ OneSignal notifikace - Zohran Mamdani ƒçl√°nek","url":"https://www.marigold.cz/NOTIFICATION_FAILURE_ANALYSIS/"}</script>
<!-- End Jekyll SEO tag -->

        <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>
    <link href="https://fed.brid.gy/" rel="alternate" type="application/activity+json">

    
    <meta property="og:description" content="Technologie a Svƒõt" />
    
    <meta name="author" content="Marigold.cz" />

    
    <meta property="og:title" content="üîç Anal√Ωza selh√°n√≠ OneSignal notifikace - Zohran Mamdani ƒçl√°nek" />
    <meta property="twitter:title" content="üîç Anal√Ωza selh√°n√≠ OneSignal notifikace - Zohran Mamdani ƒçl√°nek" />
    

    
    
























<!-- og-image source: extracted from content -->
<meta property="og:image" content="https://www.marigold.cz<article class="/>
<meta property="twitter:image" content="https://www.marigold.cz<article class="/>
<meta property="og:image:width" content="1200"/>
<meta property="og:image:height" content="630"/>
<meta name="twitter:card" content="summary_large_image"/>


    <meta property="og:site_name" content="Marigold.cz | Technologie a Spoleƒçnost"/>

    


    

    <link rel="stylesheet" type="text/css" href="/assets/style.css" />
    <link rel="alternate" type="application/rss+xml" title="Marigold.cz - Technologie a Svƒõt" href="/feed.xml" />
    <link rel="canonical" href="https://www.marigold.cz/NOTIFICATION_FAILURE_ANALYSIS/" />

    <meta name="theme-color" content="#000000">

    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
    <link rel="manifest" href="/manifest-marigold.json">
    <link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/images/favicon.ico">
    <meta name="msapplication-TileColor" content="#2d89ef">
    <meta name="msapplication-config" content="/images/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <!-- iOS Web App Configuration -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Marigold">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <!-- OneSignal Web Push Notifications -->
<script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
<script>
  console.log('[OneSignal] Script starting...');

  window.OneSignalDeferred = window.OneSignalDeferred || [];

  OneSignalDeferred.push(async function(OneSignal) {
    try {
      console.log('[OneSignal] Initializing OneSignal SDK');

      // Initialize OneSignal with minimal config
      const config = {
        appId: "00fc3def-70d1-4e7d-a081-984d5e738a75",
        notifyButton: {
          enable: true,
          position: "bottom-right",
          size: "medium",
          text: {
            "button.subscribe": "P≈ôihl√°sit se k ozn√°men√≠m",
            "button.unsubscribe": "Odhl√°sit se od ozn√°men√≠",
          },
        },
        // iOS Web Push support - requires manifest.json and home screen installation
        allowLocalhostAsSecureOrigin: true,
        // Safari Web Push configuration
        safari: {
          enable: true
        }
      };

      await OneSignal.init(config);
      console.log('[OneSignal] Initialization complete');

      // Show slidedown on 3rd page visit
      // This uses localStorage to track page visits
      try {
        const visitKey = 'onesignal_visit_count';
        let visitCount = parseInt(localStorage.getItem(visitKey) || '0', 10);
        visitCount++;
        localStorage.setItem(visitKey, visitCount.toString());

        console.log('[OneSignal] Page visit count:', visitCount);

        if (visitCount === 3) {
          console.log('[OneSignal] 3rd visit detected - showing slidedown');

          // Show slidedown prompt
          await OneSignal.Slidedown.promptPushCategories({
            slidedownPromptOptions: {
              actionMessage: "Chcete dost√°vat ozn√°men√≠ o nov√Ωch ƒçl√°nc√≠ch?",
              acceptButtonText: "Ano, p≈ôihlaste mƒõ",
              cancelButtonText: "Ne, dƒõkuji",
            }
          });

          console.log('[OneSignal] Slidedown shown successfully');

          // Reset counter after showing
          localStorage.setItem(visitKey, '0');
        } else {
          console.log('[OneSignal] Will show slidedown on visit #3 (current: #' + visitCount + ')');
        }
      } catch (e) {
        console.log('[OneSignal] Slidedown error:', e.message);
      }

      // Check permission status
      const permission = await OneSignal.Notifications.permission;
      console.log('[OneSignal] Permission status:', permission);

    } catch (error) {
      console.error('[OneSignal] Error:', error.message);
    }
  });
</script>


    <!-- Seznam.cz Discussion System -->
    <script type="text/javascript" src="https://d21-a.sdn.cz/d_21/sl/3/loader.js"></script>

    <script type="text/javascript">
      window.heapReadyCb=window.heapReadyCb||[],window.heap=window.heap||[],heap.load=function(e,t){window.heap.envId=e,window.heap.clientConfig=t=t||{},window.heap.clientConfig.shouldFetchServerConfig=!1;var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://cdn.us.heap-api.com/config/"+e+"/heap_config.js";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(a,r);var n=["init","startTracking","stopTracking","track","resetIdentity","identify","getSessionId","getUserId","getIdentity","addUserProperties","addEventProperties","removeEventProperty","clearEventProperties","addAccountProperties","addAdapter","addTransformer","addTransformerFn","onReady","addPageviewProperties","removePageviewProperty","clearPageviewProperties","trackPageview"],i=function(e){return function(){var t=Array.prototype.slice.call(arguments,0);window.heapReadyCb.push({name:e,fn:function(){heap[e]&&heap[e].apply(heap,t)}})}};for(var p=0;p<n.length;p++)heap[n[p]]=i(n[p])};
      heap.load("2219710997");
  </script>
  </head>

  <body>
    <div id="bar"></div>
    <div class="wrapper-container">
      <div class="wrapper-masthead">
        <div class="container">
          <header class="masthead clearfix">
            <a href="/" class="site-avatar"><img src="/images/patrick-avatar.jpg" alt="Marigold.cz" /></a>

            <div class="site-info">
              <h1 class="site-name"><a href="/">Marigold.cz</a></h1>
              <p class="site-description">Technologie a Svƒõt</p>

            </div>

            <nav>
              <a href="/search">üîç</a> |
              <a href="https://www.prolnuto.cz/">üßë‚Äçüíª Kurzy AI</a> |
              <a href="https://www.vibecoding.cz/">üñ•Ô∏è Vibecoding</a> |
              <a href="/mobilnisite">üóº 4G/5G</a> |
              <a href="/ai">ü§ñ AI</a> |
              <span class="nav-dropdown">
                <button class="nav-dropdown-toggle" aria-expanded="false" aria-label="Dal≈°√≠ menu">
                  Dal≈°√≠ ‚ò∞
                </button>
                <div class="nav-dropdown-menu" role="menu">
                  <a href="/tech-news/" role="menuitem">üíª Zpr√°vy</a>
                  <a href="/obrazy" role="menuitem">üñºÔ∏è Obrazy</a>
                </div>
              </span>
            </nav>
          </header>
        </div>
      </div>

      <div class="wrapper-main">
        <div id="main" role="main" class="container">
          <article class="page">

  <h1>üîç Anal√Ωza selh√°n√≠ OneSignal notifikace - Zohran Mamdani ƒçl√°nek</h1>

  <div class="entry">
    <h1 id="-anal√Ωza-selh√°n√≠-onesignal-notifikace---zohran-mamdani-ƒçl√°nek">üîç Anal√Ωza selh√°n√≠ OneSignal notifikace - Zohran Mamdani ƒçl√°nek</h1>

<p><strong>Datum incidentu:</strong> 5. listopadu 2025
<strong>ƒål√°nek:</strong> <code class="language-plaintext highlighter-rouge">_posts/2025/2025-11-05-zohran-mamdani-starosta-new-york.md</code>
<strong>Commit:</strong> <code class="language-plaintext highlighter-rouge">c599319facf</code></p>

<hr />

<h2 id="-zji≈°tƒõn√≠">üìä Zji≈°tƒõn√≠</h2>

<h3 id="ƒçasov√°-linie-ud√°lost√≠">ƒåasov√° linie ud√°lost√≠:</h3>

<ol>
  <li><strong>5. listopadu 11:40</strong> - ‚úÖ Oprava OneSignal API (commit <code class="language-plaintext highlighter-rouge">4bc02524918</code>)</li>
  <li><strong>5. listopadu 20:51</strong> - üìù <strong>Create ƒçl√°nek o Zohran Mamdani (commit <code class="language-plaintext highlighter-rouge">c599319facf</code>)</strong></li>
  <li><strong>6. listopadu 07:26</strong> - ‚úèÔ∏è Update obr√°zk≈Ø (commit <code class="language-plaintext highlighter-rouge">e2c3d27a7d3</code>)</li>
  <li><strong>6. listopadu 07:51</strong> - ‚úèÔ∏è Dal≈°√≠ update (commit <code class="language-plaintext highlighter-rouge">fcce2b35132</code>)</li>
</ol>

<h3 id="stav-ƒçl√°nku">Stav ƒçl√°nku:</h3>
<ul>
  <li><strong>Celkem commit≈Ø:</strong> 3</li>
  <li><strong>Prvn√≠ commit:</strong> <code class="language-plaintext highlighter-rouge">c599319facf</code> - mƒõl <strong>poslat notifikaci</strong></li>
  <li><strong>Druh√Ω/t≈ôet√≠ commit:</strong> Update - <strong>nepo≈°le notifikaci</strong> (spr√°vnƒõ)</li>
</ul>

<h3 id="test-lok√°ln√≠-logiky">Test lok√°ln√≠ logiky:</h3>
<p>‚úÖ Path pattern matchuje: <code class="language-plaintext highlighter-rouge">_posts/**/*.md</code> ‚Üê <code class="language-plaintext highlighter-rouge">_posts/2025/*.md</code>
‚úÖ <code class="language-plaintext highlighter-rouge">get_changed_files()</code> by detekoval ƒçl√°nek
‚úÖ <code class="language-plaintext highlighter-rouge">is_new_article()</code> by vr√°til <code class="language-plaintext highlighter-rouge">TRUE</code> p≈ôi prvn√≠m commitu
‚ùå <strong>Notifikace SE NEPOSLALA</strong> podle OneSignal dashboardu</p>

<hr />

<h2 id="-hlavn√≠-p≈ô√≠ƒçina">üéØ Hlavn√≠ p≈ô√≠ƒçina</h2>

<p><strong>Workflow se pravdƒõpodobnƒõ NESPUSTIL nebo SELHAL bez viditeln√© chyby.</strong></p>

<h3 id="mo≈æn√©-d≈Øvody-se≈ôazen√©-podle-pravdƒõpodobnosti">Mo≈æn√© d≈Øvody (se≈ôazen√© podle pravdƒõpodobnosti):</h3>

<h3 id="1Ô∏è‚É£-github-secrets-nejsou-nastaven√©-80-pravdƒõpodobnost">1Ô∏è‚É£ <strong>GitHub Secrets nejsou nastaven√©</strong> (80% pravdƒõpodobnost)</h3>

<p><strong>Probl√©m:</strong></p>
<ul>
  <li>Workflow vy≈æaduje <code class="language-plaintext highlighter-rouge">ONESIGNAL_REST_API_KEY</code> a <code class="language-plaintext highlighter-rouge">ONESIGNAL_APP_ID</code></li>
  <li>Pokud nejsou nastaven√© ‚Üí workflow sel≈æe <strong>ti≈°e</strong> bez error logu</li>
</ul>

<p><strong>Jak ovƒõ≈ôit:</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Otev≈ô√≠t GitHub ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions</span>
<span class="c"># URL: https://github.com/tangero/marigold-page/settings/secrets/actions</span>
</code></pre></div></div>

<p><strong>Oƒçek√°van√© secrets:</strong></p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">ONESIGNAL_REST_API_KEY</code> - REST API kl√≠ƒç z OneSignal</li>
  <li><code class="language-plaintext highlighter-rouge">ONESIGNAL_APP_ID</code> - App ID: <code class="language-plaintext highlighter-rouge">00fc3def-70d1-4e7d-a081-984d5e738a75</code></li>
</ul>

<p><strong>≈òe≈°en√≠:</strong></p>
<ol>
  <li>P≈ôidat secrets v GitHub UI</li>
  <li>Hodnoty najdete v OneSignal Dashboard ‚Üí Settings ‚Üí Keys &amp; IDs</li>
</ol>

<hr />

<h3 id="2Ô∏è‚É£-github-actions-je-vypnut√©-10-pravdƒõpodobnost">2Ô∏è‚É£ <strong>GitHub Actions je vypnut√©</strong> (10% pravdƒõpodobnost)</h3>

<p><strong>Probl√©m:</strong></p>
<ul>
  <li>GitHub Actions m≈Ø≈æe b√Ωt vypnut√© pro repo</li>
  <li>Nebo konkr√©tn√≠ workflow m≈Ø≈æe b√Ωt disabled</li>
</ul>

<p><strong>Jak ovƒõ≈ôit:</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Otev≈ô√≠t GitHub ‚Üí Actions</span>
<span class="c"># URL: https://github.com/tangero/marigold-page/actions</span>
</code></pre></div></div>

<p><strong>Co zkontrolovat:</strong></p>
<ul>
  <li>‚úÖ Actions je enabled pro repo?</li>
  <li>‚úÖ Workflow ‚ÄúSend OneSignal Notifications‚Äù je viditeln√Ω?</li>
  <li>‚úÖ Zobrazuje se run pro commit <code class="language-plaintext highlighter-rouge">c599319facf</code>?</li>
</ul>

<p><strong>≈òe≈°en√≠:</strong></p>
<ol>
  <li>Settings ‚Üí Actions ‚Üí General ‚Üí Enable Actions</li>
  <li>Povolit workflow runs pro tento repo</li>
</ol>

<hr />

<h3 id="3Ô∏è‚É£-workflow-selhal-s-chybou-8-pravdƒõpodobnost">3Ô∏è‚É£ <strong>Workflow selhal s chybou</strong> (8% pravdƒõpodobnost)</h3>

<p><strong>Probl√©m:</strong></p>
<ul>
  <li>Workflow se spustil, ale Python script selhal</li>
  <li>OneSignal API vr√°til error</li>
  <li>Network timeout</li>
</ul>

<p><strong>Jak ovƒõ≈ôit:</strong></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># GitHub UI ‚Üí Actions ‚Üí konkr√©tn√≠ run ‚Üí logs</span>
</code></pre></div></div>

<p><strong>Co hledat v logs:</strong></p>
<ul>
  <li>‚ùå Python import errors</li>
  <li>‚ùå OneSignal API 400/401/403/500 errors</li>
  <li>‚ùå Timeout errors</li>
  <li>‚ùå ‚ÄúNo changes detected‚Äù message</li>
</ul>

<p><strong>≈òe≈°en√≠:</strong></p>
<ul>
  <li>Zkontrolovat error logs</li>
  <li>Opravit podle specifick√© chyby</li>
</ul>

<hr />

<h3 id="4Ô∏è‚É£-fetch-depth-2-zp≈Øsobil-probl√©m-2-pravdƒõpodobnost">4Ô∏è‚É£ <strong>fetch-depth: 2 zp≈Øsobil probl√©m</strong> (2% pravdƒõpodobnost)</h3>

<p><strong>Probl√©m:</strong></p>
<ul>
  <li>Shallow clone s <code class="language-plaintext highlighter-rouge">fetch-depth: 2</code> m≈Ø≈æe nefungovat spr√°vnƒõ s <code class="language-plaintext highlighter-rouge">git log --follow</code></li>
  <li><code class="language-plaintext highlighter-rouge">is_new_article()</code> m≈Ø≈æe vr√°tit nespr√°vn√Ω v√Ωsledek</li>
</ul>

<p><strong>Testov√°no lok√°lnƒõ:</strong> Logika je spr√°vn√°, tak≈æe tohle nen√≠ p≈ô√≠ƒçina.</p>

<hr />

<h2 id="-okam≈æit√°-≈ôe≈°en√≠">‚úÖ Okam≈æit√° ≈ôe≈°en√≠</h2>

<h3 id="1-zkontrolovat-github-secrets">1. Zkontrolovat GitHub Secrets</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Otev≈ô√≠t v prohl√≠≈æeƒçi:</span>
open <span class="s2">"https://github.com/tangero/marigold-page/settings/secrets/actions"</span>

<span class="c"># Zkontrolovat, ≈æe existuj√≠:</span>
<span class="c"># - ONESIGNAL_REST_API_KEY</span>
<span class="c"># - ONESIGNAL_APP_ID</span>
</code></pre></div></div>

<h3 id="2-zkontrolovat-github-actions-logs">2. Zkontrolovat GitHub Actions logs</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Otev≈ô√≠t v prohl√≠≈æeƒçi:</span>
open <span class="s2">"https://github.com/tangero/marigold-page/actions"</span>

<span class="c"># Naj√≠t run pro commit c599319facf (5. listopadu 20:51)</span>
<span class="c"># Zkontrolovat status: Success / Failure / Skipped</span>
</code></pre></div></div>

<h3 id="3-manu√°lnƒõ-poslat-notifikaci-pro-ƒçl√°nek">3. Manu√°lnƒõ poslat notifikaci pro ƒçl√°nek</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Pou≈æ√≠t existuj√≠c√≠ skript:</span>
python3 send_notification_now.py

<span class="c"># Nebo aktualizovat ƒçl√°nek znovu (spust√≠ workflow):</span>
git commit <span class="nt">--allow-empty</span> <span class="nt">-m</span> <span class="s2">"Trigger notification for Zohran Mamdani article"</span>
git push
</code></pre></div></div>

<hr />

<h2 id="Ô∏è-prevence-do-budoucna">üõ°Ô∏è Prevence do budoucna</h2>

<h3 id="1-p≈ôidat-lep≈°√≠-error-handling-do-workflow">1. P≈ôidat lep≈°√≠ error handling do workflow</h3>

<p><strong>Aktu√°ln√≠ stav:</strong></p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Workflow sel≈æe ti≈°e pokud chyb√≠ secrets</span>
</code></pre></div></div>

<p><strong>≈òe≈°en√≠:</strong></p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Check secrets</span>
  <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">if [ -z "$ONESIGNAL_REST_API_KEY" ]; then</span>
      <span class="s">echo "‚ùå ONESIGNAL_REST_API_KEY nen√≠ nastaven√Ω!"</span>
      <span class="s">exit 1</span>
    <span class="s">fi</span>
    <span class="s">if [ -z "$ONESIGNAL_MARIGOLD_APP_ID" ]; then</span>
      <span class="s">echo "‚ùå ONESIGNAL_MARIGOLD_APP_ID nen√≠ nastaven√Ω!"</span>
      <span class="s">exit 1</span>
    <span class="s">fi</span>
    <span class="s">echo "‚úÖ V≈°echny secrets jsou nastaven√©"</span>
  <span class="na">env</span><span class="pi">:</span>
    <span class="na">ONESIGNAL_REST_API_KEY</span><span class="pi">:</span> <span class="s">$</span>
    <span class="na">ONESIGNAL_MARIGOLD_APP_ID</span><span class="pi">:</span> <span class="s">$</span>
</code></pre></div></div>

<h3 id="2-p≈ôidat-notification-p≈ôi-selh√°n√≠-workflow">2. P≈ôidat notification p≈ôi selh√°n√≠ workflow</h3>

<p><strong>≈òe≈°en√≠:</strong></p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Notify on failure</span>
  <span class="na">if</span><span class="pi">:</span> <span class="s">failure()</span>
  <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">echo "::error::Workflow selhal! Zkontrolujte logs."</span>
    <span class="s"># Poslat email nebo Slack notification</span>
</code></pre></div></div>

<h3 id="3-p≈ôidat-monitoring-do-skriptu">3. P≈ôidat monitoring do skriptu</h3>

<p><strong>Aktu√°ln√≠ stav:</strong></p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Skript jen loguje do stdout
</span><span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"‚úÖ Notifikace posl√°na"</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>≈òe≈°en√≠:</strong></p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Ukl√°dat statistiky do souboru
</span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="n">stats_file</span> <span class="o">=</span> <span class="s">"_data/notification_stats.json"</span>

<span class="c1"># Zalogovat ka≈ædou notifikaci
</span><span class="n">stats</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"timestamp"</span><span class="p">:</span> <span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">().</span><span class="n">isoformat</span><span class="p">(),</span>
    <span class="s">"article"</span><span class="p">:</span> <span class="n">article_path</span><span class="p">,</span>
    <span class="s">"notification_id"</span><span class="p">:</span> <span class="n">notification_id</span><span class="p">,</span>
    <span class="s">"recipients"</span><span class="p">:</span> <span class="n">recipients</span><span class="p">,</span>
    <span class="s">"status"</span><span class="p">:</span> <span class="s">"success"</span> <span class="k">if</span> <span class="n">recipients</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s">"failed"</span>
<span class="p">}</span>

<span class="c1"># P≈ôidat do stats souboru
</span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">stats_file</span><span class="p">,</span> <span class="s">"a"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">stats</span><span class="p">)</span> <span class="o">+</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="4-zv√Ω≈°it-fetch-depth-na-vy≈°≈°√≠-hodnotu">4. Zv√Ω≈°it <code class="language-plaintext highlighter-rouge">fetch-depth</code> na vy≈°≈°√≠ hodnotu</h3>

<p><strong>Aktu√°ln√≠ stav:</strong></p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">with</span><span class="pi">:</span>
  <span class="na">fetch-depth</span><span class="pi">:</span> <span class="m">2</span>  <span class="c1"># Pouze 2 posledn√≠ commity</span>
</code></pre></div></div>

<p><strong>Doporuƒçen√≠:</strong></p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">with</span><span class="pi">:</span>
  <span class="na">fetch-depth</span><span class="pi">:</span> <span class="m">10</span>  <span class="c1"># Posledn√≠ch 10 commit≈Ø pro spolehlivost</span>
</code></pre></div></div>

<h3 id="5-p≈ôidat-fallback-notifikaci">5. P≈ôidat fallback notifikaci</h3>

<p><strong>≈òe≈°en√≠:</strong></p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Pokud notifikace sel≈æe, zkusit znovu po 5 minut√°ch
</span><span class="kn">import</span> <span class="nn">time</span>

<span class="n">max_retries</span> <span class="o">=</span> <span class="mi">3</span>
<span class="k">for</span> <span class="n">attempt</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_retries</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">send_notification</span><span class="p">(...):</span>
        <span class="k">break</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">attempt</span> <span class="o">&lt;</span> <span class="n">max_retries</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"‚è≥ Zkou≈°√≠m znovu za 5 minut (</span><span class="si">{</span><span class="n">attempt</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s">/</span><span class="si">{</span><span class="n">max_retries</span><span class="si">}</span><span class="s">)..."</span><span class="p">)</span>
            <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">300</span><span class="p">)</span>  <span class="c1"># 5 minut
</span></code></pre></div></div>

<hr />

<h2 id="-action-items">üìã Action Items</h2>

<h3 id="-okam≈æitƒõ-do-1-hodiny">‚ö° Okam≈æitƒõ (do 1 hodiny):</h3>

<ol>
  <li><strong>Zkontrolovat GitHub Secrets</strong>
    <ul class="task-list">
      <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Otev≈ô√≠t GitHub ‚Üí Settings ‚Üí Secrets</li>
      <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Ovƒõ≈ôit <code class="language-plaintext highlighter-rouge">ONESIGNAL_REST_API_KEY</code></li>
      <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Ovƒõ≈ôit <code class="language-plaintext highlighter-rouge">ONESIGNAL_APP_ID</code></li>
    </ul>
  </li>
  <li><strong>Zkontrolovat GitHub Actions logs</strong>
    <ul class="task-list">
      <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Otev≈ô√≠t GitHub ‚Üí Actions</li>
      <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Naj√≠t run pro commit <code class="language-plaintext highlighter-rouge">c599319facf</code></li>
      <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />P≈ôeƒç√≠st error logs (pokud existuj√≠)</li>
    </ul>
  </li>
  <li><strong>Poslat notifikaci manu√°lnƒõ</strong>
    <ul class="task-list">
      <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Spustit <code class="language-plaintext highlighter-rouge">python3 send_notification_now.py</code></li>
      <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Ovƒõ≈ôit v OneSignal dashboardu</li>
    </ul>
  </li>
</ol>

<h3 id="-dnes">üìÖ Dnes:</h3>

<ol>
  <li><strong>P≈ôidat error handling do workflow</strong>
    <ul class="task-list">
      <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />P≈ôidat secret validation step</li>
      <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />P≈ôidat failure notification</li>
    </ul>
  </li>
  <li><strong>Zv√Ω≈°it fetch-depth</strong>
    <ul class="task-list">
      <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Zmƒõnit z <code class="language-plaintext highlighter-rouge">2</code> na <code class="language-plaintext highlighter-rouge">10</code></li>
    </ul>
  </li>
</ol>

<h3 id="-tento-t√Ωden">üìÖ Tento t√Ωden:</h3>

<ol>
  <li><strong>Implementovat monitoring</strong>
    <ul class="task-list">
      <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />P≈ôidat logging notifikac√≠ do souboru</li>
      <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Vytvo≈ôit dashboard se statistikami</li>
    </ul>
  </li>
  <li><strong>P≈ôidat fallback retry logiku</strong>
    <ul class="task-list">
      <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Max 3 pokusy s 5 min pauzou</li>
    </ul>
  </li>
</ol>

<hr />

<h2 id="-u≈æiteƒçn√©-odkazy">üîó U≈æiteƒçn√© odkazy</h2>

<ul>
  <li><strong>GitHub Actions logs:</strong> https://github.com/tangero/marigold-page/actions</li>
  <li><strong>GitHub Secrets:</strong> https://github.com/tangero/marigold-page/settings/secrets/actions</li>
  <li><strong>OneSignal Dashboard:</strong> https://dashboard.onesignal.com/apps/00fc3def-70d1-4e7d-a081-984d5e738a75/delivery</li>
  <li><strong>Workflow soubor:</strong> <code class="language-plaintext highlighter-rouge">.github/workflows/send-notifications.yml</code></li>
  <li><strong>Produkƒçn√≠ skript:</strong> <code class="language-plaintext highlighter-rouge">.github/scripts/send_notifications.py</code></li>
</ul>

<hr />

<p><strong>Vytvo≈ôeno:</strong> 6. listopadu 2025
<strong>Autor:</strong> Claude Code
<strong>Status:</strong> Vy≈æaduje akci - zkontrolovat GitHub Secrets a logs</p>

  </div>
</article>

        </div>
      </div>

      <div class="wrapper-footer">
        <div class="container">
          <footer class="site-footer">
  <div class="footer-grid">

    <!-- Sloupec 1: O autorovi -->
    <div class="footer-column footer-about">
      <h3>Patrick Zandl</h3>
      <p class="footer-bio">Autor, technologick√Ω nad≈°enec a blogger. P√≠≈°u o technologi√≠ch, AI a mobiln√≠ch s√≠t√≠ch.</p>

      <div class="footer-social">
        
          <a href="mailto:patrick.zandl@marigold.cz" title="Email" aria-label="Email">
            <i class="svg-icon email"></i>
          </a>
        

        
          <a href="https://www.facebook.com/patrick.zandl" title="Facebook" aria-label="Facebook">
            <i class="svg-icon facebook"></i>
          </a>
        

        
          <a href="https://www.twitter.com/tangero" title="Twitter" aria-label="Twitter">
            <i class="svg-icon twitter"></i>
          </a>
        

        
          <a href="https://www.linkedin.com/in/patrickzandl" title="LinkedIn" aria-label="LinkedIn">
            <i class="svg-icon linkedin"></i>
          </a>
        

        

        
      </div>
    </div>

    <!-- Sloupec 2: Projekty -->
    <div class="footer-column footer-projects">
      <h3>Projekty</h3>
      <ul class="footer-links">
        <li>
          <a href="https://www.marigold.cz">
            <strong>Marigold.cz</strong>
            <span>Technologie a svƒõt</span>
          </a>
        </li>
        <li>
          <a href="https://www.zitraslavni.cz">
            <strong>Z√≠t≈ôaslavn√≠.cz</strong>
            <span>Kreativn√≠ psan√≠ a Klub z√≠t≈ôaslavn√Ωch autor≈Ø</span>
          </a>
        </li>
        <li>
          <a href="https://www.vibecoding.cz">
            <strong>VibeCoding.cz</strong>
            <span>Vibe coding a programov√°n√≠ s podporou AI</span>
          </a>
        </li>
        <li>
          <a href="https://www.topflix.cz">
            <strong>TopFlix.cz</strong>
            <span>Nov√© filmy a seri√°ly na Netflixu</span>
          </a>
        </li>
        <li>
          <a href="https://zandl.substack.com">
            <strong>Substack Newsletter</strong>
            <span>Novinky o technice a AI</span>
          </a>
        </li>
      </ul>
    </div>

    <!-- Sloupec 3: Rychl√© odkazy -->
    <div class="footer-column footer-quick-links">
      <h3>Rychl√© odkazy</h3>
      <ul class="footer-links">
        <li>
          <a href="/feed.xml">
            <i class="svg-icon rss"></i>
            <strong>RSS Feed</strong>
          </a>
        </li>
        <li>
          <a href="/changelog/">
            <strong>Changelog</strong>
            <span>Historie zmƒõn projektu</span>
          </a>
        </li>
        <li>
          <a href="mailto:patrick.zandl@marigold.cz">
            <strong>Kontakt</strong>
            <span>patrick.zandl@marigold.cz</span>
          </a>
        </li>
      </ul>
    </div>

  </div>

  <div class="footer-bottom">
    <p>&copy; 2025 Marigold.cz. Vytvo≈ôeno s <a href="https://jekyllrb.com/">Jekyll</a>.</p>
  </div>
</footer>

        </div>
      </div>
    </div>

    <a title="GDPR-compliant Web Analytics" href="https://clicky.com/101451859"><img alt="Clicky" src="//static.getclicky.com/media/links/badge.gif" border="0" /></a>
<script async data-id="101451859" src="//static.getclicky.com/js"></script>
<noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/101451859ns.gif" /></p></noscript>
 | <a href="https://github.com/tangero/marigold-page"><img src="https://img.shields.io/github/last-commit/tangero/marigold-page"></a> | <a href="https://www.kronium.eu">flashlights, headlamps Fenix & outdoor</a> | <a href="https://www.vybavenidoprirody.com/">Vybaven√≠ do p≈ô√≠rody</a> | <a href="https://www.brandysboleslav.cz/">Brand√Ωs nad Labem-Star√° Boleslav</a> | <a href="https://skola.prolnuto.cz/">Letn√≠ ≈°kola AI</a>
<!-- 100% privacy-first analytics -->
<script async src="https://scripts.simpleanalyticscdn.com/latest.js"></script>


    <script>
    function toggleDetails(button) {
      const content = button.nextElementSibling;
      const isCollapsed = button.classList.contains('collapsed');

      if (isCollapsed) {
        button.classList.remove('collapsed');
        content.classList.add('show');
      } else {
        button.classList.add('collapsed');
        content.classList.remove('show');
      }
    }

    // Navigaƒçn√≠ dropdown
    (function() {
      const dropdownToggle = document.querySelector('.nav-dropdown-toggle');
      const dropdownMenu = document.querySelector('.nav-dropdown-menu');

      if (dropdownToggle && dropdownMenu) {
        // Toggle dropdown p≈ôi kliknut√≠
        dropdownToggle.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          const isExpanded = dropdownToggle.getAttribute('aria-expanded') === 'true';

          dropdownToggle.setAttribute('aria-expanded', !isExpanded);
          dropdownMenu.classList.toggle('show');
        });

        // Zav≈ô√≠t p≈ôi kliknut√≠ mimo
        document.addEventListener('click', function(e) {
          if (!e.target.closest('.nav-dropdown')) {
            dropdownToggle.setAttribute('aria-expanded', 'false');
            dropdownMenu.classList.remove('show');
          }
        });

        // Keyboard navigation
        dropdownToggle.addEventListener('keydown', function(e) {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            dropdownToggle.click();
          }
        });

        // Escape key zav≈ôe menu
        document.addEventListener('keydown', function(e) {
          if (e.key === 'Escape') {
            dropdownToggle.setAttribute('aria-expanded', 'false');
            dropdownMenu.classList.remove('show');
          }
        });
      }
    })();
    </script>
  </body>
</html>
